{
  "version": "v1",
  "boardType": "square8",
  "description": "Tests that process_line validation requires proper line targeting (lineIndex). This fixture has a malformed move without lineIndex - both TS and Python should reject it.",
  "initialState": {
    "boardType": "square8",
    "id": "rules-parity-square8-2p",
    "rngSeed": 857804475,
    "board": {
      "stacks": {},
      "markers": {
        "0,0": { "type": "marker", "player": 1, "position": { "x": 0, "y": 0 } },
        "0,1": { "type": "marker", "player": 1, "position": { "x": 0, "y": 1 } },
        "0,2": { "type": "marker", "player": 1, "position": { "x": 0, "y": 2 } },
        "0,3": { "type": "marker", "player": 1, "position": { "x": 0, "y": 3 } }
      },
      "collapsedSpaces": {},
      "territories": {},
      "formedLines": [
        {
          "positions": [
            { "x": 0, "y": 0 },
            { "x": 0, "y": 1 },
            { "x": 0, "y": 2 },
            { "x": 0, "y": 3 }
          ],
          "player": 1,
          "length": 4,
          "direction": { "x": 0, "y": 1 }
        }
      ],
      "eliminatedRings": { "1": 0, "2": 0 },
      "size": 8,
      "type": "square8"
    },
    "players": [
      {
        "id": "p1",
        "username": "Player 1",
        "type": "human",
        "playerNumber": 1,
        "isReady": false,
        "timeRemaining": 600000,
        "ringsInHand": 14,
        "eliminatedRings": 0,
        "territorySpaces": 0
      },
      {
        "id": "p2",
        "username": "Player 2",
        "type": "human",
        "playerNumber": 2,
        "isReady": false,
        "timeRemaining": 600000,
        "ringsInHand": 18,
        "eliminatedRings": 0,
        "territorySpaces": 0
      }
    ],
    "currentPhase": "line_processing",
    "currentPlayer": 1,
    "moveHistory": [],
    "history": [],
    "gameStatus": "active",
    "spectators": [],
    "timeControl": {
      "initialTime": 600,
      "increment": 5,
      "type": "blitz"
    },
    "createdAt": "2025-12-06T02:08:04.224Z",
    "lastMoveAt": "2025-12-06T02:08:04.224Z",
    "isRated": false,
    "maxPlayers": 2,
    "totalRingsInPlay": 4,
    "totalRingsEliminated": 0,
    "victoryThreshold": 19,
    "territoryVictoryThreshold": 33
  },
  "steps": [
    {
      "label": "process_line_malformed_no_lineIndex",
      "description": "Move lacks lineIndex - TS throws error, Python should also reject",
      "move": {
        "id": "fixture-square8-2p-process-line",
        "type": "process_line",
        "player": 1,
        "to": { "x": 0, "y": 0 },
        "formedLines": [
          {
            "positions": [
              { "x": 0, "y": 0 },
              { "x": 0, "y": 1 },
              { "x": 0, "y": 2 },
              { "x": 0, "y": 3 }
            ],
            "player": 1,
            "length": 4,
            "direction": { "x": 0, "y": 1 }
          }
        ],
        "timestamp": "1970-01-01T00:00:00.000Z",
        "thinkTime": 0,
        "moveNumber": 1
      },
      "expected": {
        "tsValid": false
      },
      "skip": true,
      "skipReason": "Python LineValidator does not require lineIndex - different design from TS. Skipping until Python adds line_index support."
    }
  ]
}
