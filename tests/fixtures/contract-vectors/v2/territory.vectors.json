{
  "version": "v2",
  "generated": "2025-12-02T00:00:00.000Z",
  "count": 17,
  "categories": ["territory"],
  "description": "Test vectors for territory scenarios",
  "vectors": [
    {
      "id": "territory.movement.no_disconnection",
      "version": "v2",
      "category": "territory",
      "description": "Simple movement that doesn't create territory disconnection",
      "tags": ["smoke", "territory", "movement"],
      "source": "manual",
      "createdAt": "2025-11-26T04:00:00.000Z",
      "input": {
        "state": {
          "gameId": "test-territory-001",
          "board": {
            "type": "square8",
            "size": 8,
            "stacks": {
              "3,3": {
                "position": {
                  "x": 3,
                  "y": 3
                },
                "rings": [1],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 1
              },
              "5,5": {
                "position": {
                  "x": 5,
                  "y": 5
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              }
            },
            "markers": {},
            "collapsedSpaces": {},
            "eliminatedRings": {
              "1": 0,
              "2": 0
            }
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 17,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 17,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 1,
          "currentPhase": "movement",
          "turnNumber": 3,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 18,
          "territoryVictoryThreshold": 33
        },
        "move": {
          "id": "move-401",
          "type": "move_stack",
          "player": 1,
          "from": {
            "x": 3,
            "y": 3
          },
          "to": {
            "x": 3,
            "y": 4
          },
          "timestamp": "2025-11-26T04:00:00.000Z",
          "thinkTime": 0,
          "moveNumber": 3
        }
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "currentPlayer": 2,
          "currentPhase": "ring_placement",
          "gameStatus": "active",
          "stackCount": 2,
          "markerCount": 1,
          "collapsedCount": 0,
          "sInvariantDelta": 1
        }
      }
    },
    {
      "id": "territory.initial_state.empty",
      "version": "v2",
      "category": "territory",
      "description": "Movement with no territory on board yet",
      "tags": ["territory"],
      "source": "manual",
      "createdAt": "2025-11-26T04:00:00.000Z",
      "input": {
        "state": {
          "gameId": "test-territory-002",
          "board": {
            "type": "square8",
            "size": 8,
            "stacks": {
              "4,4": {
                "position": {
                  "x": 4,
                  "y": 4
                },
                "rings": [1, 1],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {},
            "eliminatedRings": {
              "1": 0,
              "2": 0
            }
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 16,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 18,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 1,
          "currentPhase": "movement",
          "turnNumber": 2,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 18,
          "territoryVictoryThreshold": 33
        },
        "move": {
          "id": "move-402",
          "type": "move_stack",
          "player": 1,
          "from": {
            "x": 4,
            "y": 4
          },
          "to": {
            "x": 4,
            "y": 6
          },
          "timestamp": "2025-11-26T04:00:00.000Z",
          "thinkTime": 0,
          "moveNumber": 2
        }
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "currentPlayer": 2,
          "currentPhase": "ring_placement",
          "gameStatus": "active",
          "stackCount": 1,
          "markerCount": 1,
          "collapsedCount": 0,
          "sInvariantDelta": 1
        }
      }
    },
    {
      "id": "territory.forced_elimination.simple_square8",
      "version": "v2",
      "category": "territory",
      "description": "Forced self-elimination after territory collapse (square8)",
      "tags": ["territory", "forced_elimination"],
      "source": "derived_from_tests",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-territory-forced-elim",
          "board": {
            "type": "square8",
            "size": 8,
            "stacks": {
              "3,3": {
                "position": {
                  "x": 3,
                  "y": 3
                },
                "rings": [1],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {
              "0,0": 1,
              "1,0": 1
            },
            "eliminatedRings": {
              "1": 5,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 0,
              "eliminatedRings": 5,
              "territorySpaces": 2,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 0,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 2,
          "currentPhase": "movement",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 18,
          "territoryVictoryThreshold": 33,
          "totalRingsEliminated": 5
        },
        "move": {
          "id": "eliminate-3,3",
          "type": "eliminate_rings_from_stack",
          "player": 1,
          "to": {
            "x": 3,
            "y": 3
          },
          "eliminatedRings": [
            {
              "player": 1,
              "count": 1
            }
          ],
          "eliminationFromStack": {
            "position": {
              "x": 3,
              "y": 3
            },
            "capHeight": 1,
            "totalHeight": 1
          },
          "timestamp": "2025-12-02T00:00:00.000Z",
          "thinkTime": 0,
          "moveNumber": 1
        }
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "currentPlayer": 2,
          "currentPhase": "territory_processing",
          "gameStatus": "completed",
          "stackCount": 0,
          "markerCount": 0,
          "collapsedCount": 2,
          "sInvariantDelta": 1,
          "player1RingsInHand": 0,
          "player1EliminatedRings": 6,
          "player2RingsInHand": 0,
          "player2EliminatedRings": 0
        }
      },
      "skip": "PHASE_MOVE_MISMATCH: Input phase is movement but move is eliminate_rings_from_stack. Vector needs phase correction."
    },
    {
      "id": "territory.forced_elimination.simple_hexagonal",
      "version": "v2",
      "category": "territory",
      "description": "Forced self-elimination after territory collapse (hexagonal)",
      "tags": ["territory", "forced_elimination", "hex"],
      "source": "derived_from_tests",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-territory-forced-elim-hex",
          "board": {
            "type": "hexagonal",
            "size": 11,
            "stacks": {
              "3,3,0": {
                "position": {
                  "x": 3,
                  "y": 3,
                  "z": 0
                },
                "rings": [1],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {
              "0,0,0": 1,
              "1,0,-1": 1
            },
            "eliminatedRings": {
              "1": 5,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 0,
              "eliminatedRings": 5,
              "territorySpaces": 2,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 0,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 2,
          "currentPhase": "movement",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 37,
          "territoryVictoryThreshold": 235,
          "totalRingsEliminated": 5
        },
        "move": {
          "id": "eliminate-3,3,0",
          "type": "eliminate_rings_from_stack",
          "player": 1,
          "to": {
            "x": 3,
            "y": 3,
            "z": 0
          },
          "eliminatedRings": [
            {
              "player": 1,
              "count": 1
            }
          ],
          "eliminationFromStack": {
            "position": {
              "x": 3,
              "y": 3,
              "z": 0
            },
            "capHeight": 1,
            "totalHeight": 1
          },
          "timestamp": "2025-12-02T00:00:00.000Z",
          "thinkTime": 0,
          "moveNumber": 1
        }
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "currentPlayer": 2,
          "currentPhase": "territory_processing",
          "gameStatus": "completed",
          "stackCount": 0,
          "markerCount": 0,
          "collapsedCount": 2,
          "sInvariantDelta": 1,
          "player1RingsInHand": 0,
          "player1EliminatedRings": 6,
          "player2RingsInHand": 0,
          "player2EliminatedRings": 0
        }
      },
      "skip": "PHASE_MOVE_MISMATCH: Vector needs phase correction for eliminate_rings_from_stack move."
    },
    {
      "id": "territory.hex_region_then_elim.step1_region",
      "version": "v2",
      "category": "territory",
      "description": "Hex territory region processing before self-elimination (multi-step, step 1)",
      "tags": ["territory", "forced_elimination", "hex", "sequence:hex_territory.region_then_elim"],
      "source": "derived_from_helpers",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-hex-territory-seq",
          "board": {
            "type": "hexagonal",
            "size": 11,
            "stacks": {
              "0,0,0": {
                "position": {
                  "x": 0,
                  "y": 0,
                  "z": 0
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "1,-1,0": {
                "position": {
                  "x": 1,
                  "y": -1,
                  "z": 0
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "0,-1,1": {
                "position": {
                  "x": 0,
                  "y": -1,
                  "z": 1
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "2,-2,0": {
                "position": {
                  "x": 2,
                  "y": -2,
                  "z": 0
                },
                "rings": [1],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {},
            "eliminatedRings": {
              "1": 0,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 36,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 36,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 1,
          "currentPhase": "territory_processing",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 37,
          "territoryVictoryThreshold": 235,
          "totalRingsEliminated": 0
        },
        "move": {
          "id": "hex-region-1",
          "type": "choose_territory_option",
          "player": 1,
          "disconnectedRegions": [
            {
              "spaces": [
                {
                  "x": 0,
                  "y": 0,
                  "z": 0
                },
                {
                  "x": 1,
                  "y": -1,
                  "z": 0
                },
                {
                  "x": 0,
                  "y": -1,
                  "z": 1
                }
              ],
              "controllingPlayer": 1,
              "isDisconnected": true
            }
          ],
          "to": {
            "x": 0,
            "y": 0,
            "z": 0
          },
          "timestamp": "2025-12-02T00:00:00.000Z",
          "thinkTime": 0,
          "moveNumber": 1
        }
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "currentPlayer": 2,
          "currentPhase": "ring_placement",
          "gameStatus": "active",
          "stackCount": 1,
          "markerCount": 0,
          "collapsedCount": 3,
          "player1EliminatedRings": 3,
          "player1TerritorySpaces": 3,
          "player2EliminatedRings": 0
        }
      }
    },
    {
      "id": "territory.hex_region_then_elim.step2_elim",
      "version": "v2",
      "category": "territory",
      "description": "Hex mandatory self-elimination after region processing (multi-step, step 2)",
      "tags": ["territory", "forced_elimination", "hex", "sequence:hex_territory.region_then_elim"],
      "source": "derived_from_helpers",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-hex-territory-seq",
          "board": {
            "type": "hexagonal",
            "size": 11,
            "stacks": {
              "2,-2,0": {
                "position": {
                  "x": 2,
                  "y": -2,
                  "z": 0
                },
                "rings": [1],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {
              "0,0,0": 1,
              "1,-1,0": 1,
              "0,-1,1": 1
            },
            "eliminatedRings": {
              "1": 3,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 36,
              "eliminatedRings": 3,
              "territorySpaces": 3,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 36,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 2,
          "currentPhase": "ring_placement",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 37,
          "territoryVictoryThreshold": 235,
          "totalRingsEliminated": 3
        },
        "move": {
          "id": "hex-elim-1",
          "type": "eliminate_rings_from_stack",
          "player": 1,
          "to": {
            "x": 2,
            "y": -2,
            "z": 0
          },
          "eliminatedRings": [
            {
              "player": 1,
              "count": 1
            }
          ],
          "eliminationFromStack": {
            "position": {
              "x": 2,
              "y": -2,
              "z": 0
            },
            "capHeight": 1,
            "totalHeight": 1
          },
          "timestamp": "2025-12-02T00:00:01.000Z",
          "thinkTime": 0,
          "moveNumber": 2
        }
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "currentPlayer": 1,
          "currentPhase": "ring_placement",
          "gameStatus": "active",
          "stackCount": 0,
          "markerCount": 0,
          "collapsedCount": 3,
          "player1EliminatedRings": 4,
          "player1TerritorySpaces": 3,
          "player2EliminatedRings": 0
        }
      },
      "skip": "PHASE_MOVE_MISMATCH: Vector needs phase correction for eliminate_rings_from_stack move."
    },
    {
      "id": "territory.square_region_then_elim.step1_region",
      "version": "v2",
      "category": "territory",
      "description": "Square8 territory region processing before self-elimination (multi-step, step 1)",
      "tags": ["territory", "forced_elimination", "sequence:square_territory.region_then_elim"],
      "source": "derived_from_helpers",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-square-territory-seq",
          "board": {
            "type": "square8",
            "size": 8,
            "stacks": {
              "2,2": {
                "position": {
                  "x": 2,
                  "y": 2
                },
                "rings": [2, 2],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 2
              },
              "2,3": {
                "position": {
                  "x": 2,
                  "y": 3
                },
                "rings": [2, 2],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 2
              },
              "3,2": {
                "position": {
                  "x": 3,
                  "y": 2
                },
                "rings": [2, 2],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 2
              },
              "3,3": {
                "position": {
                  "x": 3,
                  "y": 3
                },
                "rings": [2, 2],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 2
              },
              "0,0": {
                "position": {
                  "x": 0,
                  "y": 0
                },
                "rings": [1, 1, 1],
                "stackHeight": 3,
                "capHeight": 3,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {},
            "eliminatedRings": {
              "1": 0,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 18,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 18,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 1,
          "currentPhase": "territory_processing",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 18,
          "territoryVictoryThreshold": 33,
          "totalRingsEliminated": 0
        },
        "move": {
          "id": "square-region-1",
          "type": "choose_territory_option",
          "player": 1,
          "disconnectedRegions": [
            {
              "spaces": [
                {
                  "x": 2,
                  "y": 2
                },
                {
                  "x": 2,
                  "y": 3
                },
                {
                  "x": 3,
                  "y": 2
                },
                {
                  "x": 3,
                  "y": 3
                }
              ],
              "controllingPlayer": 1,
              "isDisconnected": true
            }
          ],
          "to": {
            "x": 2,
            "y": 2
          },
          "timestamp": "2025-12-02T00:00:00.000Z",
          "thinkTime": 0,
          "moveNumber": 1
        }
      },
      "expectedOutput": {
        "status": "awaiting_decision",
        "assertions": {
          "currentPlayer": 1,
          "currentPhase": "territory_processing",
          "gameStatus": "active",
          "stackCount": 1,
          "markerCount": 0,
          "collapsedCount": 4,
          "player1EliminatedRings": 8,
          "player1TerritorySpaces": 4,
          "player2EliminatedRings": 0
        }
      }
    },
    {
      "id": "territory.square_region_then_elim.step2_elim",
      "version": "v2",
      "category": "territory",
      "description": "Square8 mandatory self-elimination after region processing (multi-step, step 2)",
      "tags": ["territory", "forced_elimination", "sequence:square_territory.region_then_elim"],
      "source": "derived_from_helpers",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-square-territory-seq",
          "board": {
            "type": "square8",
            "size": 8,
            "stacks": {
              "0,0": {
                "position": {
                  "x": 0,
                  "y": 0
                },
                "rings": [1, 1, 1],
                "stackHeight": 3,
                "capHeight": 3,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {
              "2,2": 1,
              "2,3": 1,
              "3,2": 1,
              "3,3": 1
            },
            "eliminatedRings": {
              "1": 8,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 18,
              "eliminatedRings": 8,
              "territorySpaces": 4,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 18,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 2,
          "currentPhase": "ring_placement",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 18,
          "territoryVictoryThreshold": 33,
          "totalRingsEliminated": 8
        },
        "move": {
          "id": "square-elim-1",
          "type": "eliminate_rings_from_stack",
          "player": 1,
          "to": {
            "x": 0,
            "y": 0
          },
          "eliminatedRings": [
            {
              "player": 1,
              "count": 3
            }
          ],
          "eliminationFromStack": {
            "position": {
              "x": 0,
              "y": 0
            },
            "capHeight": 3,
            "totalHeight": 3
          },
          "timestamp": "2025-12-02T00:00:01.000Z",
          "thinkTime": 0,
          "moveNumber": 2
        }
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "currentPlayer": 1,
          "currentPhase": "ring_placement",
          "gameStatus": "active",
          "stackCount": 0,
          "markerCount": 0,
          "collapsedCount": 4,
          "player1EliminatedRings": 11,
          "player1TerritorySpaces": 4,
          "player2EliminatedRings": 0
        }
      },
      "skip": "PHASE_MOVE_MISMATCH: Vector needs phase correction for eliminate_rings_from_stack move."
    },
    {
      "id": "territory.square_two_regions_then_elim.step1_regionB",
      "version": "v2",
      "category": "territory",
      "description": "Square8 two-region territory: process Region B first (multi-step, step 1)",
      "tags": [
        "territory",
        "forced_elimination",
        "sequence:square_territory.two_regions_then_elim"
      ],
      "source": "derived_from_helpers",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-square-two-region-territory-seq",
          "board": {
            "type": "square8",
            "size": 8,
            "stacks": {
              "1,1": {
                "position": {
                  "x": 1,
                  "y": 1
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "1,2": {
                "position": {
                  "x": 1,
                  "y": 2
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "5,5": {
                "position": {
                  "x": 5,
                  "y": 5
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "5,6": {
                "position": {
                  "x": 5,
                  "y": 6
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "0,0": {
                "position": {
                  "x": 0,
                  "y": 0
                },
                "rings": [1, 1],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 1
              },
              "7,7": {
                "position": {
                  "x": 7,
                  "y": 7
                },
                "rings": [1, 1],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {},
            "eliminatedRings": {
              "1": 0,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 18,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 18,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 1,
          "currentPhase": "territory_processing",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 18,
          "territoryVictoryThreshold": 33,
          "totalRingsEliminated": 0
        },
        "move": {
          "id": "square-two-region-B",
          "type": "choose_territory_option",
          "player": 1,
          "disconnectedRegions": [
            {
              "spaces": [
                {
                  "x": 5,
                  "y": 5
                },
                {
                  "x": 5,
                  "y": 6
                }
              ],
              "controllingPlayer": 1,
              "isDisconnected": true
            }
          ],
          "to": {
            "x": 5,
            "y": 5
          },
          "timestamp": "2025-12-02T00:00:00.000Z",
          "thinkTime": 0,
          "moveNumber": 1
        }
      },
      "expectedOutput": {
        "status": "awaiting_decision",
        "assertions": {
          "currentPlayer": 1,
          "currentPhase": "territory_processing",
          "gameStatus": "active",
          "stackCount": 4,
          "markerCount": 0,
          "collapsedCount": 2,
          "player1EliminatedRings": 2,
          "player1TerritorySpaces": 2,
          "player2EliminatedRings": 0
        }
      }
    },
    {
      "id": "territory.square_two_regions_then_elim.step2_regionA",
      "version": "v2",
      "category": "territory",
      "description": "Square8 two-region territory: process Region A second (multi-step, step 2)",
      "tags": [
        "territory",
        "forced_elimination",
        "sequence:square_territory.two_regions_then_elim"
      ],
      "source": "derived_from_helpers",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-square-two-region-territory-seq",
          "board": {
            "type": "square8",
            "size": 8,
            "stacks": {
              "1,1": {
                "position": {
                  "x": 1,
                  "y": 1
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "1,2": {
                "position": {
                  "x": 1,
                  "y": 2
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "0,0": {
                "position": {
                  "x": 0,
                  "y": 0
                },
                "rings": [1, 1],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 1
              },
              "7,7": {
                "position": {
                  "x": 7,
                  "y": 7
                },
                "rings": [1, 1],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {
              "5,5": 1,
              "5,6": 1
            },
            "eliminatedRings": {
              "1": 2,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 18,
              "eliminatedRings": 2,
              "territorySpaces": 2,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 18,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 2,
          "currentPhase": "ring_placement",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 18,
          "territoryVictoryThreshold": 33,
          "totalRingsEliminated": 2
        },
        "move": {
          "id": "square-two-region-A",
          "type": "choose_territory_option",
          "player": 1,
          "disconnectedRegions": [
            {
              "spaces": [
                {
                  "x": 1,
                  "y": 1
                },
                {
                  "x": 1,
                  "y": 2
                }
              ],
              "controllingPlayer": 1,
              "isDisconnected": true
            }
          ],
          "to": {
            "x": 1,
            "y": 1
          },
          "timestamp": "2025-12-02T00:00:01.000Z",
          "thinkTime": 0,
          "moveNumber": 2
        }
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "currentPlayer": 1,
          "currentPhase": "ring_placement",
          "gameStatus": "active",
          "stackCount": 2,
          "markerCount": 0,
          "collapsedCount": 4,
          "player1EliminatedRings": 4,
          "player1TerritorySpaces": 4,
          "player2EliminatedRings": 0
        }
      }
    },
    {
      "id": "territory.square_two_regions_then_elim.step3_elim",
      "version": "v2",
      "category": "territory",
      "description": "Square8 two-region territory: mandatory self-elimination after both regions (multi-step, step 3)",
      "tags": [
        "territory",
        "forced_elimination",
        "sequence:square_territory.two_regions_then_elim"
      ],
      "source": "derived_from_helpers",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-square-two-region-territory-seq",
          "board": {
            "type": "square8",
            "size": 8,
            "stacks": {
              "0,0": {
                "position": {
                  "x": 0,
                  "y": 0
                },
                "rings": [1, 1],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 1
              },
              "7,7": {
                "position": {
                  "x": 7,
                  "y": 7
                },
                "rings": [1, 1],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {
              "5,5": 1,
              "5,6": 1,
              "1,1": 1,
              "1,2": 1
            },
            "eliminatedRings": {
              "1": 4,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 18,
              "eliminatedRings": 4,
              "territorySpaces": 4,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 18,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 1,
          "currentPhase": "ring_placement",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 18,
          "territoryVictoryThreshold": 33,
          "totalRingsEliminated": 4
        },
        "move": {
          "id": "square-two-region-elim",
          "type": "eliminate_rings_from_stack",
          "player": 1,
          "to": {
            "x": 0,
            "y": 0
          },
          "eliminatedRings": [
            {
              "player": 1,
              "count": 2
            }
          ],
          "eliminationFromStack": {
            "position": {
              "x": 0,
              "y": 0
            },
            "capHeight": 2,
            "totalHeight": 2
          },
          "timestamp": "2025-12-02T00:00:02.000Z",
          "thinkTime": 0,
          "moveNumber": 3
        }
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "currentPlayer": 2,
          "currentPhase": "ring_placement",
          "gameStatus": "active",
          "stackCount": 1,
          "markerCount": 0,
          "collapsedCount": 4,
          "player1EliminatedRings": 6,
          "player1TerritorySpaces": 4,
          "player2EliminatedRings": 0
        }
      },
      "skip": "PHASE_MOVE_MISMATCH: Vector needs phase correction for eliminate_rings_from_stack move."
    },
    {
      "id": "territory.square19_two_regions_then_elim.step1_regionB",
      "version": "v2",
      "category": "territory",
      "description": "Square19 two-region territory: process Region B first (multi-step, step 1)",
      "tags": [
        "territory",
        "forced_elimination",
        "sequence:square19_territory.two_regions_then_elim"
      ],
      "source": "derived_from_helpers",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-square19-two-region-territory-seq",
          "board": {
            "type": "square19",
            "size": 19,
            "stacks": {
              "5,5": {
                "position": {
                  "x": 5,
                  "y": 5
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "5,6": {
                "position": {
                  "x": 5,
                  "y": 6
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "5,7": {
                "position": {
                  "x": 5,
                  "y": 7
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "6,5": {
                "position": {
                  "x": 6,
                  "y": 5
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "6,6": {
                "position": {
                  "x": 6,
                  "y": 6
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "6,7": {
                "position": {
                  "x": 6,
                  "y": 7
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "7,5": {
                "position": {
                  "x": 7,
                  "y": 5
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "7,6": {
                "position": {
                  "x": 7,
                  "y": 6
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "7,7": {
                "position": {
                  "x": 7,
                  "y": 7
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "11,11": {
                "position": {
                  "x": 11,
                  "y": 11
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "11,12": {
                "position": {
                  "x": 11,
                  "y": 12
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "11,13": {
                "position": {
                  "x": 11,
                  "y": 13
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "12,11": {
                "position": {
                  "x": 12,
                  "y": 11
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "12,12": {
                "position": {
                  "x": 12,
                  "y": 12
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "12,13": {
                "position": {
                  "x": 12,
                  "y": 13
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "13,11": {
                "position": {
                  "x": 13,
                  "y": 11
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "13,12": {
                "position": {
                  "x": 13,
                  "y": 12
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "13,13": {
                "position": {
                  "x": 13,
                  "y": 13
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "0,1": {
                "position": {
                  "x": 0,
                  "y": 1
                },
                "rings": [1, 1],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 1
              },
              "18,18": {
                "position": {
                  "x": 18,
                  "y": 18
                },
                "rings": [1, 1],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {},
            "eliminatedRings": {
              "1": 0,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 36,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 36,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 1,
          "currentPhase": "territory_processing",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 37,
          "territoryVictoryThreshold": 181,
          "totalRingsEliminated": 0
        },
        "move": {
          "id": "square19-two-region-B",
          "type": "choose_territory_option",
          "player": 1,
          "disconnectedRegions": [
            {
              "spaces": [
                {
                  "x": 11,
                  "y": 11
                },
                {
                  "x": 11,
                  "y": 12
                },
                {
                  "x": 11,
                  "y": 13
                },
                {
                  "x": 12,
                  "y": 11
                },
                {
                  "x": 12,
                  "y": 12
                },
                {
                  "x": 12,
                  "y": 13
                },
                {
                  "x": 13,
                  "y": 11
                },
                {
                  "x": 13,
                  "y": 12
                },
                {
                  "x": 13,
                  "y": 13
                }
              ],
              "controllingPlayer": 1,
              "isDisconnected": true
            }
          ],
          "to": {
            "x": 11,
            "y": 11
          },
          "timestamp": "2025-12-02T00:00:00.000Z",
          "thinkTime": 0,
          "moveNumber": 1
        }
      },
      "expectedOutput": {
        "status": "awaiting_decision",
        "assertions": {
          "currentPlayer": 1,
          "currentPhase": "territory_processing",
          "gameStatus": "active",
          "stackCount": 11,
          "markerCount": 0,
          "collapsedCount": 9,
          "player1EliminatedRings": 9,
          "player1TerritorySpaces": 9,
          "player2EliminatedRings": 0
        }
      }
    },
    {
      "id": "territory.square19_two_regions_then_elim.step2_regionA",
      "version": "v2",
      "category": "territory",
      "description": "Square19 two-region territory: process Region A second (multi-step, step 2)",
      "tags": [
        "territory",
        "forced_elimination",
        "sequence:square19_territory.two_regions_then_elim"
      ],
      "source": "derived_from_helpers",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-square19-two-region-territory-seq",
          "board": {
            "type": "square19",
            "size": 19,
            "stacks": {
              "5,5": {
                "position": {
                  "x": 5,
                  "y": 5
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "5,6": {
                "position": {
                  "x": 5,
                  "y": 6
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "5,7": {
                "position": {
                  "x": 5,
                  "y": 7
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "6,5": {
                "position": {
                  "x": 6,
                  "y": 5
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "6,6": {
                "position": {
                  "x": 6,
                  "y": 6
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "6,7": {
                "position": {
                  "x": 6,
                  "y": 7
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "7,5": {
                "position": {
                  "x": 7,
                  "y": 5
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "7,6": {
                "position": {
                  "x": 7,
                  "y": 6
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "7,7": {
                "position": {
                  "x": 7,
                  "y": 7
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "0,1": {
                "position": {
                  "x": 0,
                  "y": 1
                },
                "rings": [1, 1],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 1
              },
              "18,18": {
                "position": {
                  "x": 18,
                  "y": 18
                },
                "rings": [1, 1],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {
              "11,11": 1,
              "11,12": 1,
              "11,13": 1,
              "12,11": 1,
              "12,12": 1,
              "12,13": 1,
              "13,11": 1,
              "13,12": 1,
              "13,13": 1
            },
            "eliminatedRings": {
              "1": 9,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 36,
              "eliminatedRings": 9,
              "territorySpaces": 9,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 36,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 2,
          "currentPhase": "ring_placement",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 37,
          "territoryVictoryThreshold": 181,
          "totalRingsEliminated": 9
        },
        "move": {
          "id": "square19-two-region-A",
          "type": "choose_territory_option",
          "player": 1,
          "disconnectedRegions": [
            {
              "spaces": [
                {
                  "x": 5,
                  "y": 5
                },
                {
                  "x": 5,
                  "y": 6
                },
                {
                  "x": 5,
                  "y": 7
                },
                {
                  "x": 6,
                  "y": 5
                },
                {
                  "x": 6,
                  "y": 6
                },
                {
                  "x": 6,
                  "y": 7
                },
                {
                  "x": 7,
                  "y": 5
                },
                {
                  "x": 7,
                  "y": 6
                },
                {
                  "x": 7,
                  "y": 7
                }
              ],
              "controllingPlayer": 1,
              "isDisconnected": true
            }
          ],
          "to": {
            "x": 5,
            "y": 5
          },
          "timestamp": "2025-12-02T00:00:01.000Z",
          "thinkTime": 0,
          "moveNumber": 2
        }
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "currentPlayer": 1,
          "currentPhase": "ring_placement",
          "gameStatus": "active",
          "stackCount": 2,
          "markerCount": 0,
          "collapsedCount": 18,
          "player1EliminatedRings": 18,
          "player1TerritorySpaces": 18,
          "player2EliminatedRings": 0
        }
      }
    },
    {
      "id": "territory.square19_two_regions_then_elim.step3_elim",
      "version": "v2",
      "category": "territory",
      "description": "Square19 two-region territory: mandatory self-elimination after both regions (multi-step, step 3)",
      "tags": [
        "territory",
        "forced_elimination",
        "sequence:square19_territory.two_regions_then_elim"
      ],
      "source": "derived_from_helpers",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-square19-two-region-territory-seq",
          "board": {
            "type": "square19",
            "size": 19,
            "stacks": {
              "0,1": {
                "position": {
                  "x": 0,
                  "y": 1
                },
                "rings": [1, 1],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 1
              },
              "18,18": {
                "position": {
                  "x": 18,
                  "y": 18
                },
                "rings": [1, 1],
                "stackHeight": 2,
                "capHeight": 2,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {
              "11,11": 1,
              "11,12": 1,
              "11,13": 1,
              "12,11": 1,
              "12,12": 1,
              "12,13": 1,
              "13,11": 1,
              "13,12": 1,
              "13,13": 1,
              "5,5": 1,
              "5,6": 1,
              "5,7": 1,
              "6,5": 1,
              "6,6": 1,
              "6,7": 1,
              "7,5": 1,
              "7,6": 1,
              "7,7": 1
            },
            "eliminatedRings": {
              "1": 18,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 36,
              "eliminatedRings": 18,
              "territorySpaces": 18,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 36,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 1,
          "currentPhase": "ring_placement",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 37,
          "territoryVictoryThreshold": 181,
          "totalRingsEliminated": 18
        },
        "move": {
          "id": "square19-two-region-elim",
          "type": "eliminate_rings_from_stack",
          "player": 1,
          "to": {
            "x": 0,
            "y": 1
          },
          "eliminatedRings": [
            {
              "player": 1,
              "count": 2
            }
          ],
          "eliminationFromStack": {
            "position": {
              "x": 0,
              "y": 1
            },
            "capHeight": 2,
            "totalHeight": 2
          },
          "timestamp": "2025-12-02T00:00:02.000Z",
          "thinkTime": 0,
          "moveNumber": 3
        }
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "currentPlayer": 2,
          "currentPhase": "ring_placement",
          "gameStatus": "active",
          "stackCount": 1,
          "markerCount": 0,
          "collapsedCount": 18,
          "player1EliminatedRings": 20,
          "player1TerritorySpaces": 18,
          "player2EliminatedRings": 0
        }
      },
      "skip": "PHASE_MOVE_MISMATCH: Vector needs phase correction for eliminate_rings_from_stack move."
    },
    {
      "id": "territory.hex_two_regions_then_elim.step1_regionB",
      "version": "v2",
      "category": "territory",
      "description": "Hex two-region territory: process Region B first (multi-step, step 1)",
      "tags": [
        "territory",
        "forced_elimination",
        "hex",
        "sequence:hex_territory.two_regions_then_elim"
      ],
      "source": "derived_from_helpers",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-hex-two-region-territory-seq",
          "board": {
            "type": "hexagonal",
            "size": 11,
            "stacks": {
              "0,0,0": {
                "position": {
                  "x": 0,
                  "y": 0,
                  "z": 0
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "1,-1,0": {
                "position": {
                  "x": 1,
                  "y": -1,
                  "z": 0
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "0,-1,1": {
                "position": {
                  "x": 0,
                  "y": -1,
                  "z": 1
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "3,-3,0": {
                "position": {
                  "x": 3,
                  "y": -3,
                  "z": 0
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "4,-4,0": {
                "position": {
                  "x": 4,
                  "y": -4,
                  "z": 0
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "3,-4,1": {
                "position": {
                  "x": 3,
                  "y": -4,
                  "z": 1
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "2,-2,0": {
                "position": {
                  "x": 2,
                  "y": -2,
                  "z": 0
                },
                "rings": [1],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 1
              },
              "-3,3,0": {
                "position": {
                  "x": -3,
                  "y": 3,
                  "z": 0
                },
                "rings": [1],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {},
            "eliminatedRings": {
              "1": 0,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 36,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 36,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 1,
          "currentPhase": "territory_processing",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 37,
          "territoryVictoryThreshold": 235,
          "totalRingsEliminated": 0
        },
        "move": {
          "id": "hex-two-region-B",
          "type": "choose_territory_option",
          "player": 1,
          "disconnectedRegions": [
            {
              "spaces": [
                {
                  "x": 3,
                  "y": -3,
                  "z": 0
                },
                {
                  "x": 4,
                  "y": -4,
                  "z": 0
                },
                {
                  "x": 3,
                  "y": -4,
                  "z": 1
                }
              ],
              "controllingPlayer": 1,
              "isDisconnected": true
            }
          ],
          "to": {
            "x": 3,
            "y": -3,
            "z": 0
          },
          "timestamp": "2025-12-02T00:00:00.000Z",
          "thinkTime": 0,
          "moveNumber": 1
        }
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "currentPlayer": 1,
          "currentPhase": "territory_processing",
          "gameStatus": "active",
          "stackCount": 8,
          "markerCount": 0,
          "collapsedCount": 0,
          "player1EliminatedRings": 0,
          "player1TerritorySpaces": 0,
          "player2EliminatedRings": 0
        }
      }
    },
    {
      "id": "territory.hex_two_regions_then_elim.step2_regionA",
      "version": "v2",
      "category": "territory",
      "description": "Hex two-region territory: process Region A second (multi-step, step 2)",
      "tags": [
        "territory",
        "forced_elimination",
        "hex",
        "sequence:hex_territory.two_regions_then_elim"
      ],
      "source": "derived_from_helpers",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-hex-two-region-territory-seq",
          "board": {
            "type": "hexagonal",
            "size": 11,
            "stacks": {
              "0,0,0": {
                "position": {
                  "x": 0,
                  "y": 0,
                  "z": 0
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "1,-1,0": {
                "position": {
                  "x": 1,
                  "y": -1,
                  "z": 0
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "0,-1,1": {
                "position": {
                  "x": 0,
                  "y": -1,
                  "z": 1
                },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "2,-2,0": {
                "position": {
                  "x": 2,
                  "y": -2,
                  "z": 0
                },
                "rings": [1],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 1
              },
              "-3,3,0": {
                "position": {
                  "x": -3,
                  "y": 3,
                  "z": 0
                },
                "rings": [1],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {
              "3,-3,0": 1,
              "4,-4,0": 1,
              "3,-4,1": 1
            },
            "eliminatedRings": {
              "1": 3,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 36,
              "eliminatedRings": 3,
              "territorySpaces": 3,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 36,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 2,
          "currentPhase": "ring_placement",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 37,
          "territoryVictoryThreshold": 235,
          "totalRingsEliminated": 3
        },
        "move": {
          "id": "hex-two-region-A",
          "type": "choose_territory_option",
          "player": 1,
          "disconnectedRegions": [
            {
              "spaces": [
                {
                  "x": 0,
                  "y": 0,
                  "z": 0
                },
                {
                  "x": 1,
                  "y": -1,
                  "z": 0
                },
                {
                  "x": 0,
                  "y": -1,
                  "z": 1
                }
              ],
              "controllingPlayer": 1,
              "isDisconnected": true
            }
          ],
          "to": {
            "x": 0,
            "y": 0,
            "z": 0
          },
          "timestamp": "2025-12-02T00:00:01.000Z",
          "thinkTime": 0,
          "moveNumber": 2
        }
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "currentPlayer": 1,
          "currentPhase": "ring_placement",
          "gameStatus": "active",
          "stackCount": 2,
          "markerCount": 0,
          "collapsedCount": 6,
          "player1EliminatedRings": 6,
          "player1TerritorySpaces": 6,
          "player2EliminatedRings": 0
        }
      }
    },
    {
      "id": "territory.hex_two_regions_then_elim.step3_elim",
      "version": "v2",
      "category": "territory",
      "description": "Hex two-region territory: mandatory self-elimination after both regions (multi-step, step 3)",
      "tags": [
        "territory",
        "forced_elimination",
        "hex",
        "sequence:hex_territory.two_regions_then_elim"
      ],
      "source": "derived_from_helpers",
      "createdAt": "2025-12-02T00:00:00.000Z",
      "input": {
        "state": {
          "gameId": "contract-hex-two-region-territory-seq",
          "board": {
            "type": "hexagonal",
            "size": 11,
            "stacks": {
              "2,-2,0": {
                "position": {
                  "x": 2,
                  "y": -2,
                  "z": 0
                },
                "rings": [1],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 1
              },
              "-3,3,0": {
                "position": {
                  "x": -3,
                  "y": 3,
                  "z": 0
                },
                "rings": [1],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 1
              }
            },
            "markers": {},
            "collapsedSpaces": {
              "3,-3,0": 1,
              "4,-4,0": 1,
              "3,-4,1": 1,
              "0,0,0": 1,
              "1,-1,0": 1,
              "0,-1,1": 1
            },
            "eliminatedRings": {
              "1": 6,
              "2": 0
            },
            "formedLines": []
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 36,
              "eliminatedRings": 6,
              "territorySpaces": 6,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 36,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 1,
          "currentPhase": "ring_placement",
          "turnNumber": 1,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 37,
          "territoryVictoryThreshold": 235,
          "totalRingsEliminated": 6
        },
        "move": {
          "id": "hex-two-region-elim",
          "type": "eliminate_rings_from_stack",
          "player": 1,
          "to": {
            "x": 2,
            "y": -2,
            "z": 0
          },
          "eliminatedRings": [
            {
              "player": 1,
              "count": 1
            }
          ],
          "eliminationFromStack": {
            "position": {
              "x": 2,
              "y": -2,
              "z": 0
            },
            "capHeight": 1,
            "totalHeight": 1
          },
          "timestamp": "2025-12-02T00:00:02.000Z",
          "thinkTime": 0,
          "moveNumber": 3
        }
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "currentPlayer": 2,
          "currentPhase": "ring_placement",
          "gameStatus": "active",
          "stackCount": 1,
          "markerCount": 0,
          "collapsedCount": 6,
          "player1EliminatedRings": 7,
          "player1TerritorySpaces": 6,
          "player2EliminatedRings": 0
        }
      },
      "skip": "PHASE_MOVE_MISMATCH: Vector needs phase correction for eliminate_rings_from_stack move."
    }
  ]
}
