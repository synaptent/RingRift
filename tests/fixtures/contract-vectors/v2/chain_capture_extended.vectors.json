{
  "version": "v2",
  "generated": "2025-12-01T11:00:00.000Z",
  "count": 2,
  "categories": ["chain-capture"],
  "description": "Test vectors for extended chain capture scenarios with 4+ targets - P19B.2-2. Key insight: each capture must land at distance >= current stack height.",
  "vectors": [
    {
      "id": "chain_capture.4_targets.diagonal_with_turn",
      "version": "v2",
      "category": "chain-capture",
      "description": "Chain capture with exactly 4 targets: diagonal SE (landing at 7,7 to satisfy distance 3) followed by W turn",
      "tags": ["chain-capture", "extended", "4-targets"],
      "source": "manual",
      "createdAt": "2025-12-01T11:00:00.000Z",
      "ruleReferences": ["ยง10.2", "ยง10.3", "FAQ 15.3.1", "FAQ 15.3.2"],
      "input": {
        "state": {
          "gameId": "test-chain-capture-4",
          "board": {
            "type": "square8",
            "size": 8,
            "stacks": {
              "0,0": {
                "position": { "x": 0, "y": 0 },
                "rings": [1],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 1
              },
              "1,1": {
                "position": { "x": 1, "y": 1 },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "3,3": {
                "position": { "x": 3, "y": 3 },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "5,5": {
                "position": { "x": 5, "y": 5 },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "6,7": {
                "position": { "x": 6, "y": 7 },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              }
            },
            "markers": {},
            "collapsedSpaces": {},
            "eliminatedRings": { "1": 0, "2": 0 }
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 17,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 14,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 1,
          "currentPhase": "movement",
          "turnNumber": 5,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 18,
          "territoryVictoryThreshold": 33
        },
        "initialMove": {
          "id": "move-chain-4-start",
          "type": "overtaking_capture",
          "player": 1,
          "from": { "x": 0, "y": 0 },
          "captureTarget": { "x": 1, "y": 1 },
          "to": { "x": 2, "y": 2 },
          "timestamp": "2025-12-01T11:00:00.000Z",
          "thinkTime": 0,
          "moveNumber": 5
        },
        "expectedChainSequence": [
          {
            "segment": 1,
            "from": { "x": 0, "y": 0 },
            "captureTarget": { "x": 1, "y": 1 },
            "landing": { "x": 2, "y": 2 },
            "direction": "SE",
            "attackerHeightAfter": 2,
            "distanceConstraint": "distance 2 >= height 1"
          },
          {
            "segment": 2,
            "from": { "x": 2, "y": 2 },
            "captureTarget": { "x": 3, "y": 3 },
            "landing": { "x": 4, "y": 4 },
            "direction": "SE",
            "attackerHeightAfter": 3,
            "distanceConstraint": "distance 2 >= height 2"
          },
          {
            "segment": 3,
            "from": { "x": 4, "y": 4 },
            "captureTarget": { "x": 5, "y": 5 },
            "landing": { "x": 7, "y": 7 },
            "direction": "SE",
            "attackerHeightAfter": 4,
            "distanceConstraint": "distance 3 >= height 3 (cannot land at 6,6 because distance 2 < height 3)"
          },
          {
            "segment": 4,
            "from": { "x": 7, "y": 7 },
            "captureTarget": { "x": 6, "y": 7 },
            "landing": { "x": 3, "y": 7 },
            "direction": "W",
            "attackerHeightAfter": 5,
            "distanceConstraint": "distance 4 >= height 4"
          }
        ]
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "totalCapturesInChain": 4,
          "finalStackHeight": 5,
          "finalStackController": 1,
          "targetStacksRemaining": 0,
          "markersCreated": 4,
          "sInvariantDelta": 4
        },
        "finalState": {
          "finalStackPosition": { "x": 3, "y": 7 },
          "markerPositions": [
            { "x": 0, "y": 0 },
            { "x": 2, "y": 2 },
            { "x": 4, "y": 4 },
            { "x": 7, "y": 7 }
          ]
        }
      }
    },
    {
      "id": "chain_capture.5_plus_targets.extended_path",
      "version": "v2",
      "category": "chain-capture",
      "description": "Chain capture with 5 targets: diagonal SE, W turn, then N",
      "tags": ["chain-capture", "extended", "5-targets"],
      "source": "manual",
      "createdAt": "2025-12-01T11:00:00.000Z",
      "ruleReferences": ["ยง10.2", "ยง10.3", "FAQ 15.3.1", "FAQ 15.3.2"],
      "input": {
        "state": {
          "gameId": "test-chain-capture-5",
          "board": {
            "type": "square8",
            "size": 8,
            "stacks": {
              "0,0": {
                "position": { "x": 0, "y": 0 },
                "rings": [1],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 1
              },
              "1,1": {
                "position": { "x": 1, "y": 1 },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "3,3": {
                "position": { "x": 3, "y": 3 },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "5,5": {
                "position": { "x": 5, "y": 5 },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "6,7": {
                "position": { "x": 6, "y": 7 },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              },
              "3,2": {
                "position": { "x": 3, "y": 2 },
                "rings": [2],
                "stackHeight": 1,
                "capHeight": 1,
                "controllingPlayer": 2
              }
            },
            "markers": {},
            "collapsedSpaces": {},
            "eliminatedRings": { "1": 0, "2": 0 }
          },
          "players": [
            {
              "playerNumber": 1,
              "ringsInHand": 17,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            },
            {
              "playerNumber": 2,
              "ringsInHand": 13,
              "eliminatedRings": 0,
              "territorySpaces": 0,
              "isActive": true
            }
          ],
          "currentPlayer": 1,
          "currentPhase": "movement",
          "turnNumber": 6,
          "moveHistory": [],
          "gameStatus": "active",
          "victoryThreshold": 18,
          "territoryVictoryThreshold": 33
        },
        "initialMove": {
          "id": "move-chain-5-start",
          "type": "overtaking_capture",
          "player": 1,
          "from": { "x": 0, "y": 0 },
          "captureTarget": { "x": 1, "y": 1 },
          "to": { "x": 2, "y": 2 },
          "timestamp": "2025-12-01T11:00:00.000Z",
          "thinkTime": 0,
          "moveNumber": 6
        },
        "expectedChainSequence": [
          {
            "segment": 1,
            "from": { "x": 0, "y": 0 },
            "captureTarget": { "x": 1, "y": 1 },
            "landing": { "x": 2, "y": 2 },
            "direction": "SE",
            "attackerHeightAfter": 2,
            "distanceConstraint": "distance 2 >= height 1"
          },
          {
            "segment": 2,
            "from": { "x": 2, "y": 2 },
            "captureTarget": { "x": 3, "y": 3 },
            "landing": { "x": 4, "y": 4 },
            "direction": "SE",
            "attackerHeightAfter": 3,
            "distanceConstraint": "distance 2 >= height 2"
          },
          {
            "segment": 3,
            "from": { "x": 4, "y": 4 },
            "captureTarget": { "x": 5, "y": 5 },
            "landing": { "x": 7, "y": 7 },
            "direction": "SE",
            "attackerHeightAfter": 4,
            "distanceConstraint": "distance 3 >= height 3"
          },
          {
            "segment": 4,
            "from": { "x": 7, "y": 7 },
            "captureTarget": { "x": 6, "y": 7 },
            "landing": { "x": 3, "y": 7 },
            "direction": "W",
            "attackerHeightAfter": 5,
            "distanceConstraint": "distance 4 >= height 4"
          },
          {
            "segment": 5,
            "from": { "x": 3, "y": 7 },
            "captureTarget": { "x": 3, "y": 2 },
            "landing": { "x": 3, "y": 0 },
            "direction": "N",
            "attackerHeightAfter": 6,
            "distanceConstraint": "distance 7 >= height 5"
          }
        ]
      },
      "expectedOutput": {
        "status": "complete",
        "assertions": {
          "totalCapturesInChain": 5,
          "finalStackHeight": 6,
          "finalStackController": 1,
          "targetStacksRemaining": 0,
          "markersCreated": 5,
          "sInvariantDelta": 5
        },
        "finalState": {
          "finalStackPosition": { "x": 3, "y": 0 },
          "markerPositions": [
            { "x": 0, "y": 0 },
            { "x": 2, "y": 2 },
            { "x": 4, "y": 4 },
            { "x": 7, "y": 7 },
            { "x": 3, "y": 7 }
          ]
        }
      }
    }
  ]
}
