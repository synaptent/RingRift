# =============================================================================
# RingRift Environment Configuration
# =============================================================================
#
# This file documents the most common environment variables used by RingRift.
# Copy this file to `.env` for local development.
#
# SECURITY NOTES:
# - The `.env` file is gitignored and should NEVER be committed
# - In production, use proper secrets management (e.g., Kubernetes Secrets,
#   AWS Secrets Manager, HashiCorp Vault)
# - All placeholder secrets in this file are detected and rejected in production
#
# ENVIRONMENT SUPPORT:
# - development: Local development with sensible defaults
# - staging: Pre-production environment with production-like validation
# - production: Production environment with strict validation
# - test: Automated testing environment
#
# For detailed secrets management guidance, see: docs/operations/SECRETS_MANAGEMENT.md
# For the full environment variable reference (including AI service + debug flags),
# see: docs/operations/ENVIRONMENT_VARIABLES.md
# =============================================================================


# =============================================================================
# ENVIRONMENT MODE
# =============================================================================

# Application environment mode
# Values: development | staging | production | test
# Default: development
# 
# In production/staging, many optional variables become required and
# placeholder values are rejected with clear error messages.
NODE_ENV=development


# =============================================================================
# SERVER CONFIGURATION
# =============================================================================

# HTTP server port for the main API
# Type: number (1-65535)
# Default: 3000
PORT=3000

# Server bind address
# Type: string
# Default: 0.0.0.0
# HOST=0.0.0.0

# WebSocket server port (legacy; WebSocket shares PORT)
# This value is not read by current server builds.
# SOCKET_PORT=3001


# =============================================================================
# WEBSOCKET CONFIGURATION
# =============================================================================

# Maximum reconnection window before pending choices are cleared (milliseconds)
# Type: number
# Default: 30000
WS_RECONNECTION_TIMEOUT_MS=30000


# =============================================================================
# DATABASE (REQUIRED in production)
# =============================================================================
# PostgreSQL connection URL containing credentials.
#
# Format: postgresql://USER:PASSWORD@HOST:PORT/DATABASE
#
# SECURITY:
# - Required in production (server will fail to start without it)
# - Contains credentials - never log or expose this value
# - Use strong passwords (16+ characters, mixed chars)
#
# Secret Rotation:
# 1. Create new database user with new password
# 2. Grant same permissions as old user
# 3. Update DATABASE_URL environment variable
# 4. Restart application
# 5. Verify connectivity, then revoke old user

DATABASE_URL=postgresql://ringrift:password@localhost:5432/ringrift

# Database connection pool settings
# Type: number
# Defaults: min=2, max=10
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10

# Component fields for tooling (docker-compose, deploy scripts). The server
# reads DATABASE_URL only; these are ignored by Prisma/runtime.
# Individual database components (used by some tools, not Prisma)
DB_HOST=localhost
DB_PORT=5432
DB_NAME=ringrift
DB_USER=ringrift
# PLACEHOLDER - change for any non-local deployment
DB_PASSWORD=password


# =============================================================================
# REDIS (Optional in dev, REQUIRED in production)
# =============================================================================
# Redis connection URL for caching, sessions, and pub/sub.
#
# SECURITY:
# - Required in production for session management
# - Use TLS in production (rediss:// prefix)
# - Set REDIS_PASSWORD for authenticated access
#
# Secret Rotation:
# 1. Configure new password in Redis (CONFIG SET requirepass newpassword)
# 2. Update REDIS_PASSWORD environment variable
# 3. Restart application
# 4. Verify connectivity

REDIS_URL=redis://localhost:6379

# Component fields for tooling. The server reads REDIS_URL only.
REDIS_HOST=localhost
REDIS_PORT=6379

# Optional - leave empty for local development without auth
REDIS_PASSWORD=

# Enable TLS for Redis connections (use rediss:// URL in production)
# Type: boolean (true/false, 1/0)
# Default: false
REDIS_TLS=false


# =============================================================================
# JWT / AUTHENTICATION (REQUIRED in production)
# =============================================================================
# JWT secrets for signing and verifying authentication tokens.
#
# REQUIREMENTS (Production):
# - JWT_SECRET: Minimum 32 characters, randomly generated
# - JWT_REFRESH_SECRET: Minimum 32 characters, different from JWT_SECRET
# - Both must NOT be placeholder values (detected and rejected)
#
# Generate secure secrets:
#   openssl rand -base64 48
#   # or: node -e "console.log(require('crypto').randomBytes(48).toString('base64'))"
#
# SECURITY:
# - Never reuse secrets across environments
# - Never commit real secrets to version control
# - Tokens signed with old secrets become invalid on rotation
#
# Secret Rotation:
# 1. Generate new JWT_SECRET and JWT_REFRESH_SECRET
# 2. Update environment variables
# 3. Restart application
# 4. All existing sessions will be invalidated (users must re-login)
# 5. For zero-downtime rotation, implement key versioning

# PLACEHOLDER - server rejects these in production mode
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production
JWT_REFRESH_SECRET=your-super-secret-refresh-key-change-this-in-production

# Token expiration times
# Type: string (duration format: 15m, 1h, 7d)
# Access tokens: Short-lived (default: 15 minutes)
JWT_EXPIRES_IN=15m
# Refresh tokens: Longer-lived (default: 7 days)
JWT_REFRESH_EXPIRES_IN=7d


# =============================================================================
# AUTH LOGIN LOCKOUT
# =============================================================================
# Login protection against brute-force attacks.
# These settings are intentionally conservative for development.

# Maximum failed login attempts before lockout
# Type: number
# Default: 10
AUTH_MAX_FAILED_LOGIN_ATTEMPTS=10

# Time window for counting failed login attempts (seconds)
# Type: number
# Default: 900 (15 minutes)
AUTH_FAILED_LOGIN_WINDOW_SECONDS=900

# Duration of login lockout (seconds)
# Type: number
# Default: 900 (15 minutes)
AUTH_LOCKOUT_DURATION_SECONDS=900

# Enable/disable login lockout feature
# Type: string (true/false, 1/0)
# Default: true (enabled when not set)
# Set to "false" or "0" to disable globally
AUTH_LOGIN_LOCKOUT_ENABLED=true


# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# bcrypt rounds for password hashing (higher = more secure but slower)
# Type: number (4-31)
# Default: 12 (good balance for production)
BCRYPT_ROUNDS=12


# =============================================================================
# RATE LIMITING
# =============================================================================
# Rate limiting is enforced using Redis for distributed deployments or
# in-memory storage for single-instance/development environments.
#
# Each endpoint type has configurable limits. All values are:
# - POINTS: Maximum number of requests allowed in the window
# - DURATION: Window duration in seconds
# - BLOCK_DURATION: How long to block after limit exceeded (seconds)
#
# Rate limit headers are included in all responses:
# - X-RateLimit-Limit: Maximum requests in the window
# - X-RateLimit-Remaining: Remaining requests in current window
# - X-RateLimit-Reset: Unix timestamp when the window resets

# --- General API endpoints (anonymous users) ---
# Lower limits for unauthenticated requests
RATE_LIMIT_API_POINTS=50
RATE_LIMIT_API_DURATION=60
RATE_LIMIT_API_BLOCK_DURATION=300

# --- General API endpoints (authenticated users) ---
# Higher limits for authenticated users
RATE_LIMIT_API_AUTH_POINTS=200
RATE_LIMIT_API_AUTH_DURATION=60
RATE_LIMIT_API_AUTH_BLOCK_DURATION=300

# --- Auth endpoints (general) ---
# Applied to all authentication routes
RATE_LIMIT_AUTH_POINTS=10
RATE_LIMIT_AUTH_DURATION=900
RATE_LIMIT_AUTH_BLOCK_DURATION=1800

# --- Login endpoint (stricter) ---
# Protects against brute force attacks
RATE_LIMIT_AUTH_LOGIN_POINTS=5
RATE_LIMIT_AUTH_LOGIN_DURATION=900
RATE_LIMIT_AUTH_LOGIN_BLOCK_DURATION=1800

# --- Registration endpoint (stricter) ---
# Prevents spam account creation
RATE_LIMIT_AUTH_REGISTER_POINTS=3
RATE_LIMIT_AUTH_REGISTER_DURATION=3600
RATE_LIMIT_AUTH_REGISTER_BLOCK_DURATION=3600

# --- Password reset endpoint ---
# Prevents abuse of password reset functionality
RATE_LIMIT_AUTH_PWD_RESET_POINTS=3
RATE_LIMIT_AUTH_PWD_RESET_DURATION=3600
RATE_LIMIT_AUTH_PWD_RESET_BLOCK_DURATION=3600

# --- Game endpoints ---
# Applied to game management operations
RATE_LIMIT_GAME_POINTS=200
RATE_LIMIT_GAME_DURATION=60
RATE_LIMIT_GAME_BLOCK_DURATION=300

# --- Game moves ---
# Higher limits for active gameplay
RATE_LIMIT_GAME_MOVES_POINTS=100
RATE_LIMIT_GAME_MOVES_DURATION=60
RATE_LIMIT_GAME_MOVES_BLOCK_DURATION=60

# --- WebSocket connections ---
# Limits new WebSocket connections
RATE_LIMIT_WS_POINTS=10
RATE_LIMIT_WS_DURATION=60
RATE_LIMIT_WS_BLOCK_DURATION=300

# --- Game creation per user ---
# Prevents users from creating too many games
RATE_LIMIT_GAME_CREATE_USER_POINTS=20
RATE_LIMIT_GAME_CREATE_USER_DURATION=600
RATE_LIMIT_GAME_CREATE_USER_BLOCK_DURATION=600

# --- Game creation per IP ---
# Additional protection for game creation
RATE_LIMIT_GAME_CREATE_IP_POINTS=50
RATE_LIMIT_GAME_CREATE_IP_DURATION=600
RATE_LIMIT_GAME_CREATE_IP_BLOCK_DURATION=600

# --- User search endpoints ---
# Limits search requests per user/IP
RATE_LIMIT_USER_SEARCH_POINTS=20
RATE_LIMIT_USER_SEARCH_DURATION=60
RATE_LIMIT_USER_SEARCH_BLOCK_DURATION=120

# --- User rating endpoints ---
# Limits rating-related requests per user/IP
RATE_LIMIT_USER_RATING_POINTS=30
RATE_LIMIT_USER_RATING_DURATION=60
RATE_LIMIT_USER_RATING_BLOCK_DURATION=120

# --- Sandbox AI endpoints ---
# Limits sandbox AI helper endpoints
RATE_LIMIT_SANDBOX_AI_POINTS=1000
RATE_LIMIT_SANDBOX_AI_DURATION=60
RATE_LIMIT_SANDBOX_AI_BLOCK_DURATION=60

# --- Internal health endpoints ---
# Limits internal health checks (non-public)
RATE_LIMIT_INTERNAL_HEALTH_POINTS=30
RATE_LIMIT_INTERNAL_HEALTH_DURATION=60
RATE_LIMIT_INTERNAL_HEALTH_BLOCK_DURATION=60

# --- Data export endpoints ---
# Limits export endpoints (e.g., replay/data exports)
RATE_LIMIT_DATA_EXPORT_POINTS=1
RATE_LIMIT_DATA_EXPORT_DURATION=3600
RATE_LIMIT_DATA_EXPORT_BLOCK_DURATION=3600

# --- Alert webhook endpoints ---
# Limits internal alert webhooks
RATE_LIMIT_ALERT_WEBHOOK_POINTS=10
RATE_LIMIT_ALERT_WEBHOOK_DURATION=60
RATE_LIMIT_ALERT_WEBHOOK_BLOCK_DURATION=300

# --- Telemetry rate limiting ---
# Limits for client telemetry events (per IP)
RATE_LIMIT_TELEMETRY_POINTS=100
RATE_LIMIT_TELEMETRY_DURATION=60
RATE_LIMIT_TELEMETRY_BLOCK_DURATION=300

# --- Client error reporting rate limiting ---
# Limits for client error reports (per IP)
RATE_LIMIT_CLIENT_ERRORS_POINTS=20
RATE_LIMIT_CLIENT_ERRORS_DURATION=60
RATE_LIMIT_CLIENT_ERRORS_BLOCK_DURATION=300

# --- Fallback limiter (in-memory only) ---
# Used when Redis is unavailable
RATE_LIMIT_FALLBACK_WINDOW_MS=900000
RATE_LIMIT_FALLBACK_MAX_REQUESTS=100

# --- Rate limit bypass (for load testing) ---
# ⚠️  SECURITY WARNING: These settings bypass rate limiting protection!
#     NEVER enable in production - it defeats DDoS and brute-force protection.
#
# When enabled, requests from users matching RATE_LIMIT_BYPASS_USER_PATTERN
# or from IPs in RATE_LIMIT_BYPASS_IPS will skip rate limiting entirely.
#
# Intended use case:
# - Staging environments during load testing
# - Load test users should have emails like: loadtest.user1@loadtest.local
#
# All bypass events are logged for audit purposes.

# Master switch - MUST default to false, NEVER enable in production
RATE_LIMIT_BYPASS_ENABLED=false

# Optional bypass token (min 16 chars) for X-RateLimit-Bypass-Token header
# RATE_LIMIT_BYPASS_TOKEN=

# Regex pattern to match load test user emails
# Default: matches emails like loadtest.user1@loadtest.local
RATE_LIMIT_BYPASS_USER_PATTERN=^loadtest\..+@loadtest\.local$

# Comma-separated list of IPs to bypass (leave empty for production)
RATE_LIMIT_BYPASS_IPS=


# =============================================================================
# CORS CONFIGURATION
# =============================================================================
# Cross-Origin Resource Sharing settings for browser security.
#
# In production, set these to your actual domain(s).

# Primary CORS origin for API requests
CORS_ORIGIN=http://localhost:5173

# Public client URL for redirects etc.
CLIENT_URL=http://localhost:3000

# Comma-separated list of allowed origins
ALLOWED_ORIGINS=http://localhost:5173,http://localhost:3000


# =============================================================================
# LOGGING
# =============================================================================

# Application log level
# Values: error | warn | info | debug | trace
# Default: info
LOG_LEVEL=info

# Log output format
# Values: json | pretty
# Default: json (production), pretty (development/test when unset)
# Controls console formatting; file logs remain JSON.
# LOG_FORMAT=json

# Log file path (optional, logs also go to stdout)
# Overrides the combined log file path (default: ./logs/combined.log).
# LOG_FILE=./logs/app.log


# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable Prometheus metrics endpoint
# Type: boolean (true/false, 1/0)
# Default: true
# ENABLE_METRICS=true

# Enable health check endpoints
# Type: boolean (true/false, 1/0)
# Default: true
# ENABLE_HEALTH_CHECKS=true

# Enable AI analysis mode for position evaluation streaming
# Type: boolean (true/false, 1/0)
# Default: false
ENABLE_ANALYSIS_MODE=false

# Metrics server port
# Type: number (1-65535)
# Default: 9090
# When set explicitly and different from PORT, metrics are served on this port.
# METRICS_PORT=9090

# Optional API key for metrics endpoint protection
# Type: string
# Default: (empty)
METRICS_API_KEY=

# Enable orchestrator adapter for turn processing
# Type: boolean (true/false, 1/0)
# Default: true (enabled by default since Phase 3 migration completed)
#
# When enabled, the server and sandbox engines use the canonical orchestrator
# (src/shared/engine/orchestration/) via adapter wrappers for unified turn
# processing. This is the production default after Phase 3 Rules Engine
# Consolidation.
#
# NOTE: The adapter is now hardcoded to true; this env var is ignored.
ORCHESTRATOR_ADAPTER_ENABLED=true

# Enable internal HTTP move harness endpoint (POST /api/games/:gameId/moves)
# Type: boolean (true/false, 1/0)
# Default: false
ENABLE_HTTP_MOVE_HARNESS=false

# Timeout for HTTP move harness requests (milliseconds)
# Type: number
# Default: 30000
HTTP_MOVE_HARNESS_TIMEOUT_MS=30000


# =============================================================================
# ORCHESTRATOR ROLLOUT CONFIGURATION
# =============================================================================
# Feature flags for phased orchestrator rollout with fine-grained control.
# These settings allow gradual rollout, A/B testing, and automatic safety
# controls during the orchestrator migration.
#
# For detailed design, see: docs/archive/ORCHESTRATOR_ROLLOUT_FEATURE_FLAGS.md

# Percentage of sessions to route through orchestrator (0-100)
# NOTE: ORCHESTRATOR_ROLLOUT_PERCENTAGE was removed in Phase 3 migration.
# The orchestrator is now permanently enabled (100%) for all game sessions.
# This configuration option is retained only for documentation/reference.
#
# Type: number (0-100)
# Default: 100 (hardcoded, not configurable)
# ORCHESTRATOR_ROLLOUT_PERCENTAGE=100

# NOTE: Shadow mode has been removed. FSM is now the canonical validator.
# This env var is retained only for documentation/reference.
# The orchestrator no longer supports shadow mode comparisons.
#
# Type: boolean (true/false, 1/0)
# Default: false (deprecated, no effect)
# ORCHESTRATOR_SHADOW_MODE_ENABLED=false

# Comma-separated list of user IDs to force-enable orchestrator
# Type: string (comma-separated UUIDs)
# Default: "" (empty)
#
# Users in this list will always use the orchestrator engine regardless
# of rollout percentage. Useful for beta testing with specific users.
# Example: "user-uuid-1,user-uuid-2,user-uuid-3"
ORCHESTRATOR_ALLOWLIST_USERS=

# Comma-separated list of user IDs to force-disable orchestrator
# Type: string (comma-separated UUIDs)
# Default: "" (empty)
#
# Users in this list will never use the orchestrator engine regardless
# of rollout percentage. Useful for excluding users experiencing issues.
# Example: "user-uuid-1,user-uuid-2"
ORCHESTRATOR_DENYLIST_USERS=

# Enable circuit breaker for automatic failover on errors
# Type: boolean (true/false, 1/0)
# Default: true
#
# When enabled, the system automatically disables orchestrator routing
# if error rates exceed the threshold, falling back to legacy engine.
ORCHESTRATOR_CIRCUIT_BREAKER_ENABLED=true

# Error rate percentage to trip circuit breaker (0-100)
# Type: number (0-100)
# Default: 5
#
# If error rate exceeds this percentage within the error window,
# the circuit breaker trips and disables orchestrator routing.
ORCHESTRATOR_ERROR_THRESHOLD_PERCENT=5

# Time window in seconds for error rate calculation
# Type: number (positive integer)
# Default: 300 (5 minutes)
#
# The sliding window duration for calculating the error rate.
# Shorter windows react faster but may be more sensitive to spikes.
ORCHESTRATOR_ERROR_WINDOW_SECONDS=300

# P99 latency threshold in milliseconds for warnings
# Type: number (positive integer)
# Default: 500
#
# When P99 latency exceeds this threshold, warnings are logged.
# Does not affect routing, used for monitoring and alerting.
ORCHESTRATOR_LATENCY_THRESHOLD_MS=500


# =============================================================================
# FILE STORAGE
# =============================================================================

# Directory for user uploads (relative to project root)
UPLOAD_DIR=./uploads

# Maximum upload file size in bytes (default: 5MB)
MAX_FILE_SIZE=5242880


# =============================================================================
# GAME CONFIGURATION
# =============================================================================

# Maximum concurrent games allowed
# Type: number
# Default: 1000
MAX_CONCURRENT_GAMES=1000

# Game timeout in minutes (inactive games are cleaned up)
# Type: number
# Default: 60
GAME_TIMEOUT_MINUTES=60

# AI thinking time in milliseconds
# Type: number
# Default: 2000
AI_THINK_TIME_MS=2000

# Optional override for decision-phase timeouts (milliseconds)
# Defaults (when unset): 30000 total, 5000 warning, 15000 extension
# DECISION_PHASE_TIMEOUT_MS=30000
# DECISION_PHASE_TIMEOUT_WARNING_MS=5000
# DECISION_PHASE_TIMEOUT_EXTENSION_MS=15000

# Maximum spectators per game
# Type: number
# Default: 50
MAX_SPECTATORS_PER_GAME=50


# =============================================================================
# AI SERVICE (REQUIRED in production)
# =============================================================================
# FastAPI-based AI service for opponent moves and game analysis.
#
# SECURITY:
# - Required in production (server will fail to start without it)
# - In Docker Compose, use internal DNS: http://ai-service:8001
# - Never expose AI service directly to the internet
#
# The AI service does not require additional secrets currently.

# AI service base URL
# Required in production, defaults to http://localhost:8001 in development
AI_SERVICE_URL=http://localhost:8001

# AI service port (used when running ai-service directly)
AI_SERVICE_PORT=8001

# Request timeout in milliseconds
# Type: number
# Default: 30000
AI_SERVICE_REQUEST_TIMEOUT_MS=30000
AI_RULES_REQUEST_TIMEOUT_MS=5000

# Maximum concurrent AI requests (backpressure control)
# Type: number
# Default: 16
AI_MAX_CONCURRENT_REQUESTS=16

# Enable AI fallback to local heuristics when service unavailable
# Type: boolean (true/false, 1/0)
# Default: true
AI_FALLBACK_ENABLED=true

# AI service log level (for ai-service container)
AI_LOG_LEVEL=INFO

# Enable sandbox AI endpoints for difficulty-based AI move selection
# This exposes the /api/games/sandbox/ai/move endpoint which proxies to the
# Python AI service, enabling the full difficulty ladder with proper think times.
# Type: boolean (true/false, 1/0)
# Default: false
ENABLE_SANDBOX_AI_ENDPOINTS=false

# AI service runtime mode (FastAPI)
# Values: development | staging | production | test
# Default: development
# RINGRIFT_ENV=development

# CORS allowlist for the AI service (comma-separated, or "*" for all)
# Default: *
# CORS_ORIGINS=*

# Admin key for protected AI-service endpoints (auto-generated if unset)
# ADMIN_API_KEY=

# Optional daemon bootstrap for AI-service nodes
# RINGRIFT_NODE_ROLE=
# RINGRIFT_START_DAEMONS=0

# AI service operation timeout (seconds)
# Default: 30.0
# RINGRIFT_AI_TIMEOUT=30.0

# AI instance cache controls
# Default: enabled, 1800s TTL, 512 max entries
# RINGRIFT_AI_INSTANCE_CACHE=1
# RINGRIFT_AI_INSTANCE_CACHE_TTL_SEC=1800
# RINGRIFT_AI_INSTANCE_CACHE_MAX=512

# Override GameReplayDB path for AI replay API
# GAME_REPLAY_DB_PATH=data/games/selfplay.db


# =============================================================================
# RULES ENGINE
# =============================================================================
# Rules engine mode for game logic execution.
#
# NOTE: FSM is now the canonical game state orchestrator (RR-CANON compliance).
# The 'shadow' mode has been removed. See CANONICAL_ENGINE_API.md for details.
#
# Options:
#   ts (default) - TypeScript engine is authoritative (FSM canonical)
#   python       - Python engine is authoritative (for AI service parity testing)

# RINGRIFT_RULES_MODE=ts

# FSM validation mode
# Values: active | off
# Default: active
# RINGRIFT_FSM_VALIDATION_MODE=active

# Recovery stack-strike v1 (enabled by default; set to 0 to disable)
# Values: 1 | 0
# Default: 1
# RINGRIFT_RECOVERY_STACK_STRIKE_V1=1


# =============================================================================
# APPLICATION TOPOLOGY
# =============================================================================
# How the application is deployed.
#
# Options:
#   single (default) - Single instance, all state in memory
#   multi-unsafe     - Multiple instances without sticky sessions (NOT RECOMMENDED)
#   multi-sticky     - Multiple instances with infrastructure-enforced sticky sessions
#
# WARNING: Do not use multi-* without proper session affinity configuration.

# RINGRIFT_APP_TOPOLOGY=single


# =============================================================================
# EMAIL (OPTIONAL)
# =============================================================================
# SMTP configuration for sending emails (password reset, notifications, etc.)
#
# These settings are optional. If not configured, email features will be disabled.

# SMTP_HOST=smtp.example.com
# SMTP_PORT=587
# SMTP_USER=user@example.com
# SMTP_PASSWORD=secret
# SMTP_TLS=true
# SMTP_FROM=noreply@ringrift.com


# =============================================================================
# CLIENT/FRONTEND CONFIGURATION
# =============================================================================
# These VITE_* variables are exposed to the React client via import.meta.env
# and are embedded in the built JavaScript bundle.
#
# WARNING: Never put secrets in VITE_* variables - they are public!

# API base URL override for the web client (optional)
# Defaults to same-origin `/api` when unset
# VITE_API_URL=http://localhost:3000/api

# WebSocket base URL override for the web client (optional)
# Defaults to same-origin WebSocket when unset
# VITE_WS_URL=ws://localhost:3000

# Client-side AI service URL for replay browsing (ReplayService)
# Defaults to http://localhost:8001 when unset
# RINGRIFT_AI_SERVICE_URL=http://localhost:8001

# Enable client-side error reporting
# VITE_ERROR_REPORTING_ENABLED=true

# Endpoint for error reports
# VITE_ERROR_REPORTING_ENDPOINT=/api/client-errors

# Maximum errors to report per session
# VITE_ERROR_REPORTING_MAX_EVENTS=50

# Enable difficulty calibration telemetry (default: true; set false to disable)
# VITE_DIFFICULTY_CALIBRATION_TELEMETRY_ENABLED=false

# Enable rules UX telemetry (default: true; set false to disable)
# VITE_RULES_UX_TELEMETRY_ENABLED=false

# Sample rate for rules UX help-open telemetry (0.0 - 1.0, default: 1.0)
# VITE_RULES_UX_HELP_OPEN_SAMPLE_RATE=1.0

# Optional build metadata for telemetry/debugging
# VITE_CLIENT_BUILD=
# VITE_GIT_SHA=
# VITE_APP_VERSION=


# =============================================================================
# DEVELOPMENT/DEBUG FLAGS
# =============================================================================
# These flags are for development and debugging purposes only.
# Do not enable in production.

# Enable trace-level engine logging
# RINGRIFT_TRACE_DEBUG=1

# Enable FSM structured logging (canonical orchestrator)
# RINGRIFT_FSM_STRUCTURED_LOGGING=true

# Enable FSM trace logging (verbose orchestrator diagnostics)
# RINGRIFT_FSM_TRACE_DEBUG=1

# Enable movement debug logging in the shared engine
# RINGRIFT_DEBUG_MOVEMENT=true

# Enable elimination audit logging
# RINGRIFT_ELIMINATION_AUDIT=true

# Enable sandbox AI stall diagnostics
# RINGRIFT_ENABLE_SANDBOX_AI_STALL_DIAGNOSTICS=false

# Enable sandbox capture debug logging
# RINGRIFT_SANDBOX_CAPTURE_DEBUG=false

# Enable sandbox AI capture debug logging
# RINGRIFT_SANDBOX_AI_CAPTURE_DEBUG=false

# Enable sandbox AI trace mode
# RINGRIFT_SANDBOX_AI_TRACE_MODE=false

# Enable sandbox last-player-standing (LPS) debug logging
# RINGRIFT_SANDBOX_LPS_DEBUG=false

# Enable sandbox AI parity mode
# RINGRIFT_SANDBOX_AI_PARITY_MODE=false

# Enable sandbox animation debug logging
# RINGRIFT_SANDBOX_ANIMATION_DEBUG=false

# Enable local AI heuristic mode
# RINGRIFT_LOCAL_AI_HEURISTIC_MODE=false


# =============================================================================
# DATA RETENTION (GDPR COMPLIANCE)
# =============================================================================
# Data retention periods for GDPR compliance. All values are optional and use
# sensible defaults if not specified. See: docs/security/DATA_LIFECYCLE_AND_PRIVACY.md
#
# These settings control how long different types of data are retained before
# cleanup. The DataRetentionService runs periodically to enforce these policies.

# Days to retain soft-deleted user accounts before hard delete
# After this period, user data is permanently removed
# Default: 30 (GDPR typically requires 30-day recovery window)
DATA_RETENTION_DELETED_USERS_DAYS=30

# Days of inactivity before marking a user as inactive
# Inactive users may be subject to different retention policies
# Default: 365 (1 year)
DATA_RETENTION_INACTIVE_USERS_DAYS=365

# Days to retain unverified accounts before soft deletion
# Accounts that haven't verified email within this period are cleaned up
# Default: 7 (1 week)
DATA_RETENTION_UNVERIFIED_DAYS=7

# Months to retain game history data
# Default: 24 (2 years)
# DATA_RETENTION_GAME_DATA_MONTHS=24

# Hours to retain session data
# Default: 24 (1 day)
# DATA_RETENTION_SESSION_HOURS=24

# Days to retain expired/revoked refresh tokens before deletion
# Keeps token table size manageable
# Default: 7 (1 week)
# DATA_RETENTION_EXPIRED_TOKEN_DAYS=7


# =============================================================================
# SLACK ALERTING (OPTIONAL)
# =============================================================================
# Slack webhook URLs for operational alerts.
#
# SECURITY:
# - Webhook URLs are secrets - never commit real URLs to version control
# - Generate webhooks at: https://api.slack.com/messaging/webhooks
#
# Secret Rotation:
# 1. Create a new webhook in Slack app settings
# 2. Update the environment variable
# 3. Restart application
# 4. Delete old webhook in Slack settings

# Primary alert webhook
# ALERT_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/HERE

# Secondary/backup alert webhook (optional)
# ALERT_WEBHOOK_URL_SECONDARY=https://hooks.slack.com/services/YOUR/BACKUP/WEBHOOK


# =============================================================================
# LOAD TESTING (OPTIONAL)
# =============================================================================
# Configuration for k6 load test user pool.
# Only needed when running load tests.

# Number of pre-created load test users
# LOADTEST_USER_POOL_SIZE=50

# Shared password for load test user accounts
# PLACEHOLDER - replace with a test-only password
# LOADTEST_USER_POOL_PASSWORD=your-loadtest-password-here
