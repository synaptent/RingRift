# Template for distributed self-play host configuration
# Copy this file to distributed_hosts.yaml and fill in your actual values
# distributed_hosts.yaml is gitignored and should not be committed

hosts:
  # Example remote host configuration
  my-remote-host:
    ssh_host: 'username@192.168.1.100' # SSH connection string
    ssh_key: '~/.ssh/id_rsa' # Optional: Path to SSH key
    ringrift_path: '~/Development/RingRift/ai-service' # Path to ai-service/ on remote
    venv_activate: 'source ~/Development/RingRift/ai-service/venv/bin/activate'
    status: 'ready' # ready, disabled, maintenance
    role: 'selfplay' # selfplay, mixed, nn_training, cmaes, etc.
    cpus: 16 # Optional: CPU cores (used for scheduling hints)
    gpu: '' # Optional: GPU name/label (e.g. "RTX 4090", "Apple M3 (MPS)")
    max_parallel_jobs: 2 # Optional: concurrency cap for SSH orchestration
    # memory_gb: RAM in GB - used for smart job distribution
    # If not specified, will be auto-detected via SSH
    # Memory requirements:
    #   - square8: 8GB minimum (light games)
    #   - square19/hexagonal: 48GB minimum (heavy games)
    memory_gb: 32

  # Another example
  high-memory-server:
    ssh_host: 'user@server.local'
    ringrift_path: '/home/user/RingRift'
    venv_activate: 'source /home/user/RingRift/ai-service/venv/bin/activate'
    memory_gb: 128 # Can run all board types

  # ===========================================================================
  # Cloudflare Zero Trust Configuration
  # ===========================================================================
  # Hosts behind Cloudflare Zero Trust can be accessed via cloudflared tunnels.
  # The connection priority is:
  #   1. Direct SSH via tailscale_ip (if configured)
  #   2. Direct SSH via ssh_host
  #   3. Cloudflare Zero Trust tunnel (fallback)
  #
  # Prerequisites:
  #   - Install cloudflared: https://developers.cloudflare.com/cloudflare-one/connections/connect-apps/install-and-setup/
  #   - Configure SSH tunnel in Cloudflare Zero Trust dashboard
  #   - For automated/daemon use, create a service token in Access > Service Auth
  #
  # Example with Cloudflare Zero Trust:
  cloudflare-host-example:
    ssh_host: '10.0.0.50' # Internal IP (may not be directly reachable)
    ssh_user: 'ubuntu'
    ssh_key: '~/.ssh/id_rsa'
    ringrift_path: '/home/ubuntu/ringrift/ai-service'
    venv_activate: 'source /home/ubuntu/ringrift/ai-service/venv/bin/activate'
    memory_gb: 64
    status: 'disabled' # Change to 'ready' when configured

    # Cloudflare Zero Trust settings (optional - used as fallback)
    cloudflare_tunnel: 'ssh.example.com' # Your Cloudflare tunnel hostname
    # For non-interactive/automated use, add service tokens:
    # cloudflare_service_token_id: 'your-service-token-id'
    # cloudflare_service_token_secret: 'your-service-token-secret'

# Board configurations (optional, defaults are built-in)
# Uncomment to override
# board_configs:
#   square8:
#     max_moves_2p: 200
#     max_moves_3p: 250
#     max_moves_4p: 300
#   square19:
#     max_moves_2p: 1200
#     max_moves_3p: 1400
#     max_moves_4p: 1600
#   hexagonal:
#     max_moves_2p: 1200
#     max_moves_3p: 1400
#     max_moves_4p: 1600
