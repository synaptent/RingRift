INFO:app.config.unified_config:Loaded unified config from /Users/armand/Development/RingRift/ai-service/config/unified_loop.yaml
INFO:app.config.unified_config:  Training threshold: 200
INFO:app.config.unified_config:  Elo DB: data/unified_elo.db
/Users/armand/Development/RingRift/ai-service/scripts/p2p_orchestrator.py:1214: DeprecationWarning: app.distributed.ssh_transport is deprecated and will be removed in a future version. Please migrate to app.core.ssh for all SSH operations:
  - Use app.core.ssh.SSHClient instead of SSHTransport
  - Use app.core.ssh.get_ssh_client() for cached client instances
  - Use app.core.ssh.run_ssh_command_async() for async SSH commands
  from app.distributed.ssh_transport import (
Latency tracker module loaded
Bandwidth monitor module loaded
Lifeguard enhancement module loaded
Metrics collector module loaded
2026-01-22 23:09:16,473 - app.coordination.safeguards - INFO - Safeguards initialized
/Users/armand/.pyenv/versions/3.10.13/lib/python3.10/site-packages/paramiko/pkey.py:100: CryptographyDeprecationWarning: TripleDES has been moved to cryptography.hazmat.decrepit.ciphers.algorithms.TripleDES and will be removed from cryptography.hazmat.primitives.ciphers.algorithms in 48.0.0.
  "cipher": algorithms.TripleDES,
/Users/armand/.pyenv/versions/3.10.13/lib/python3.10/site-packages/paramiko/transport.py:259: CryptographyDeprecationWarning: TripleDES has been moved to cryptography.hazmat.decrepit.ciphers.algorithms.TripleDES and will be removed from cryptography.hazmat.primitives.ciphers.algorithms in 48.0.0.
  "class": algorithms.TripleDES,
[P2P] Port is free, proceeding with startup
2026-01-22 23:09:16,594 - p2p_orchestrator - INFO - [P2P] Previous manager (PID 9824) is dead, taking over
2026-01-22 23:09:16,594 - p2p_orchestrator - INFO - [P2P] Claimed supervisor role: manual (PID 63139)
[P2P] Claimed supervisor role: manual
2026-01-22 23:09:16,696 - p2p_orchestrator - INFO - [P2P] Acquired singleton lock (PID 63139)
2026-01-22 23:09:16,697 - p2p_orchestrator - INFO - Initializing P2P orchestrator: node_id=mac-studio
2026-01-22 23:09:16,697 - p2p_orchestrator - INFO - Bootstrap seeds: 3 CLI + 5 hardcoded = 8 total
2026-01-22 23:09:16,757 - p2p_orchestrator - INFO - Auto-detected storage: RAMDRIVE (RAM: 128GB, Disk: 356GB free / 62% used)
2026-01-22 23:09:16,771 - app.utils.ramdrive - INFO - ============================================================
2026-01-22 23:09:16,771 - app.utils.ramdrive - INFO - STORAGE AUTO-DETECTION REPORT
2026-01-22 23:09:16,771 - app.utils.ramdrive - INFO - ============================================================
2026-01-22 23:09:16,771 - app.utils.ramdrive - INFO - System RAM:     128.0GB total, 89.6GB available
2026-01-22 23:09:16,771 - app.utils.ramdrive - INFO - Disk:           926.4GB total, 356.0GB free (61.6% used)
2026-01-22 23:09:16,771 - app.utils.ramdrive - INFO - Ramdrive:       /tmp - 356.0GB free
2026-01-22 23:09:16,771 - app.utils.ramdrive - INFO - RAM-rich:       Yes
2026-01-22 23:09:16,771 - app.utils.ramdrive - INFO - Disk-limited:   No
2026-01-22 23:09:16,771 - app.utils.ramdrive - INFO - Recommendation: USE RAMDRIVE
2026-01-22 23:09:16,771 - app.utils.ramdrive - INFO - ============================================================
2026-01-22 23:09:16,806 - p2p_orchestrator - INFO - [P2P] Using YAML config tailscale_ip: 100.107.168.125
[P2P] Voter quorum enabled: voters=8, quorum=2 (hetzner-cpu1, hetzner-cpu2, hetzner-cpu3, mac-studio, macbook-pro-3, macbook-pro-4, macbook-pro-5, vultr-a100-20gb)
2026-01-22 23:09:16,941 - scripts.p2p.leadership_state_machine - INFO - LeadershipStateMachine initialized: node_id=mac-studio, state=follower, epoch=0
2026-01-22 23:09:16,943 - p2p_orchestrator - INFO - DeadPeerCooldownManager initialized with adaptive cooldown
2026-01-22 23:09:16,949 - p2p_orchestrator - INFO - [P2P] Diagnostic instrumentation enabled (Phase 0)
2026-01-22 23:09:16,954 - scripts.p2p.controllers.adaptive_timeouts - INFO - AdaptiveTimeoutManager initialized: enabled=True, default=15.0s, provider_defaults=8
2026-01-22 23:09:16,955 - scripts.p2p.controllers.effectiveness_tracker - INFO - EffectivenessTracker initialized: enabled=True, cooldown=120s
2026-01-22 23:09:16,955 - scripts.p2p.controllers.stability_controller - INFO - StabilityController initialized: enabled=True, interval=30.0s, callbacks=[<RecoveryAction.INCREASE_TIMEOUT: 'increase_timeout'>, <RecoveryAction.DECREASE_TIMEOUT: 'decrease_timeout'>, <RecoveryAction.SCALE_POOL_UP: 'scale_pool_up'>, <RecoveryAction.RESET_CIRCUIT: 'reset_circuit'>, <RecoveryAction.INCREASE_COOLDOWN: 'increase_cooldown'>, <RecoveryAction.REINJECT_PEER: 'reinject_peer'>, <RecoveryAction.EMIT_ALERT: 'emit_alert'>]
2026-01-22 23:09:16,955 - p2p_orchestrator - INFO - [P2P] Stability controller enabled (Self-Healing Architecture)
2026-01-22 23:09:16,955 - p2p_orchestrator - INFO - MonitoringManager initialized
2026-01-22 23:09:16,966 - app.coordination.database_sync_manager - INFO - [EloSyncManager] Initialized for elo db=/Users/armand/Development/RingRift/ai-service/data/unified_elo.db, coordinator=nebius-backbone-1
2026-01-22 23:09:16,966 - p2p_orchestrator - INFO - EloSyncManager initialized (db: /Users/armand/Development/RingRift/ai-service/data/unified_elo.db)
2026-01-22 23:09:16,966 - p2p_orchestrator - INFO - PFSP opponent pools initialized for 4 configs
2026-01-22 23:09:16,966 - p2p_orchestrator - INFO - CMA-ES auto-tuners initialized for 4 configs
2026-01-22 23:09:16,966 - p2p_orchestrator - INFO - P2P protocols: MEMBERSHIP_MODE=hybrid (SWIM=available), CONSENSUS_MODE=hybrid (Raft=available)
2026-01-22 23:09:16,966 - scripts.p2p.consensus_mixin - WARNING - Raft consensus unavailable: no Raft partners available
2026-01-22 23:09:16,981 - scripts.p2p.transport_cascade - INFO - Registered transport: http_direct (tier TIER_1_FAST)
2026-01-22 23:09:16,981 - scripts.p2p.transport_cascade - INFO - Registered transport: tailscale (tier TIER_2_RELIABLE)
2026-01-22 23:09:16,982 - scripts.p2p.transport_cascade - INFO - Registered transport: p2pd_udp (tier TIER_1_FAST)
2026-01-22 23:09:16,982 - scripts.p2p.p2p_mixin_base - INFO - [peer_manager] P2PD UDP transport registered for CGNAT bypass
2026-01-22 23:09:16,982 - scripts.p2p.transport_cascade - INFO - Registered transport: ssh_tunnel (tier TIER_3_TUNNELED)
2026-01-22 23:09:16,982 - scripts.p2p.transport_cascade - INFO - Registered transport: cloudflare_tunnel (tier TIER_3_TUNNELED)
2026-01-22 23:09:17,101 - scripts.p2p.p2p_mixin_base - INFO - [peer_manager] Multi-relay failover enabled with 7 relays: vultr-a100-20gb, hetzner-cpu2, hetzner-cpu1... (preferred: hetzner-cpu2)
2026-01-22 23:09:17,101 - scripts.p2p.transport_cascade - INFO - Registered transport: p2p_relay (tier TIER_4_RELAY)
2026-01-22 23:09:17,101 - scripts.p2p.p2p_mixin_base - INFO - [peer_manager] Failover system initialized successfully
2026-01-22 23:09:17,101 - p2p_orchestrator - INFO - Failover system initialized (transport cascade + union discovery)
2026-01-22 23:09:17,103 - scripts.p2p.managers.state_manager - INFO - Loaded cluster epoch: 5402
2026-01-22 23:09:17,104 - p2p_orchestrator - INFO - Safeguards: rate_limit=5/min, load_max=2.0x, agent_mode=False
2026-01-22 23:09:17,106 - scripts.p2p.managers.state_manager - INFO - P0.5: Invalidated expired leader lease on startup. Old leader: vultr-a100-20gb, expired at: 1769144709, now: 1769144957
2026-01-22 23:09:17,106 - scripts.p2p.managers.state_manager - INFO - Loaded state: 181 peers, 201 jobs
2026-01-22 23:09:17,107 - scripts.p2p.managers.state_manager - INFO - [StateManager] Cleaned stale state: removed 200 jobs, 174 peers
2026-01-22 23:09:17,107 - p2p_orchestrator - INFO - Loaded state: 7 peers, 1 jobs
2026-01-22 23:09:17,107 - p2p_orchestrator - INFO - [P2P] Startup state validation passed
2026-01-22 23:09:17,107 - scripts.p2p.managers.state_manager - INFO - [StateManager] Loaded 17 peer health records
2026-01-22 23:09:17,107 - p2p_orchestrator - INFO - [P2P] Loaded 17 peer health records
2026-01-22 23:09:17,915 - p2p_orchestrator - WARNING - [P2P] GPU node mac-studio is marked as coordinator - this may be a misconfiguration. GPU: Apple MPS. Unset RINGRIFT_IS_COORDINATOR or remove role:coordinator from YAML to enable training capabilities.
2026-01-22 23:09:17,915 - p2p_orchestrator - INFO - [P2P] Coordinator-only mode: no selfplay/training/cmaes capabilities
2026-01-22 23:09:18,196 - scripts.p2p.managers.node_selector - INFO - [NodeSelector] Subscribed to HOST_OFFLINE
2026-01-22 23:09:18,196 - scripts.p2p.managers.node_selector - INFO - [NodeSelector] Subscribed to NODE_RECOVERED
2026-01-22 23:09:18,196 - scripts.p2p.managers.node_selector - INFO - [NodeSelector] Subscribed to HOST_ONLINE
2026-01-22 23:09:18,196 - p2p_orchestrator - WARNING - Cannot create ramdrive at /dev/shm/ringrift/data: [Errno 1] Operation not permitted: '/dev/shm'. Falling back to disk storage.
2026-01-22 23:09:18,196 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to LEADER_ELECTED
2026-01-22 23:09:18,196 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to NODE_RECOVERED
2026-01-22 23:09:18,196 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to HOST_ONLINE
2026-01-22 23:09:18,196 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Event subscriptions complete (3 events)
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to SELFPLAY_RATE_CHANGED
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to EXPLORATION_BOOST
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to TRAINING_COMPLETED
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to ELO_VELOCITY_CHANGED
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to NPZ_EXPORT_COMPLETE
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to TRAINING_STARTED
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to EVALUATION_COMPLETED
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to PLATEAU_DETECTED
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to EVALUATION_BACKPRESSURE
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to EVALUATION_BACKPRESSURE_RELEASED
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to TRAINING_BLOCKED_BY_QUALITY
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to HYPERPARAMETER_UPDATED
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to QUALITY_SCORE_UPDATED
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to ARCHITECTURE_WEIGHTS_UPDATED
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to DATA_STARVATION_CRITICAL
2026-01-22 23:09:18,197 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Event subscriptions complete (15 events)
2026-01-22 23:09:18,216 - p2p_orchestrator - INFO - [P2P] Seeded SelfplayScheduler with 12 config game counts from canonical DBs
2026-01-22 23:09:18,216 - p2p_orchestrator - INFO - [P2P] Underserved config: hexagonal_4p = 291 games
2026-01-22 23:09:18,216 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to HOST_OFFLINE
2026-01-22 23:09:18,217 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to HOST_ONLINE
2026-01-22 23:09:18,217 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to NODE_RECOVERED
2026-01-22 23:09:18,217 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Event subscriptions complete (3 events)
2026-01-22 23:09:18,217 - p2p_orchestrator - INFO - [P2P] Spawn verification wired: JobManager <-> SelfplayScheduler
2026-01-22 23:09:18,217 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to SELFPLAY_COMPLETE
2026-01-22 23:09:18,217 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to DATA_SYNC_COMPLETED
2026-01-22 23:09:18,217 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to EVALUATION_COMPLETED
2026-01-22 23:09:18,217 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to REGRESSION_DETECTED
2026-01-22 23:09:18,217 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to TASK_ABANDONED
2026-01-22 23:09:18,217 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Subscribed to P2P_NODE_DEAD
2026-01-22 23:09:18,217 - scripts.p2p.p2p_mixin_base - INFO - [EventSubscriptionMixin] Event subscriptions complete (6 events)
2026-01-22 23:09:18,217 - p2p_orchestrator - INFO - [P2P] JobOrchestrationManager initialized
2026-01-22 23:09:18,217 - p2p_orchestrator - INFO - WorkDiscoveryManager: initialized with 4 discovery channels
2026-01-22 23:09:18,232 - app.coordination.cross_process_events - INFO - [CrossProcessEventPoller] Resuming from event_id 22778
2026-01-22 23:09:18,232 - app.coordination.curriculum_integration - INFO - [MomentumToCurriculumBridge] Subscribed to EVALUATION_COMPLETED, SELFPLAY_RATE_CHANGED, ELO_SIGNIFICANT_CHANGE, SELFPLAY_ALLOCATION_UPDATED, MODEL_PROMOTED, TIER_PROMOTION, CROSSBOARD_PROMOTION, CURRICULUM_ADVANCEMENT_NEEDED, ELO_VELOCITY_CHANGED, CURRICULUM_ADVANCED, CURRICULUM_PROPAGATE, REGRESSION_DETECTED, TRAINING_LOSS_ANOMALY, QUORUM_RECOVERY_STARTED, CURRICULUM_ROLLBACK
2026-01-22 23:09:18,232 - app.coordination.curriculum_integration - INFO - [MomentumToCurriculumBridge] Started (event-driven mode)
2026-01-22 23:09:18,232 - app.coordination.curriculum_integration - INFO - [PFSPWeaknessWatcher] Started
2026-01-22 23:09:18,232 - app.coordination.curriculum_router - INFO - [promotion_failed_curriculum_watcher] Subscribed to ['PROMOTION_FAILED']
2026-01-22 23:09:18,232 - app.coordination.curriculum_integration - INFO - [PromotionCompletedToCurriculumWatcher] Subscribed to PROMOTION_COMPLETED
2026-01-22 23:09:18,233 - app.coordination.curriculum_router - INFO - [quality_penalty_curriculum_watcher] Subscribed to ['QUALITY_PENALTY_APPLIED']
2026-01-22 23:09:18,233 - app.coordination.curriculum_router - INFO - [regression_critical_curriculum_watcher] Subscribed to ['REGRESSION_CRITICAL']
2026-01-22 23:09:18,233 - app.coordination.curriculum_router - INFO - [architecture_curriculum_bridge] Subscribed to ['ARCHITECTURE_WEIGHTS_UPDATED']
2026-01-22 23:09:18,234 - app.coordination.curriculum_integration - INFO - [QualityToTemperatureWatcher] Subscribed to quality events
2026-01-22 23:09:18,234 - app.training.curriculum_feedback - INFO - [CurriculumFeedback] Subscribed to CURRICULUM_ADVANCED + TRAINING_EARLY_STOPPED events
2026-01-22 23:09:18,234 - app.training.curriculum_feedback - INFO - [EloToCurriculumWatcher] Subscribed to ELO_UPDATED events
2026-01-22 23:09:18,235 - app.training.curriculum_feedback - INFO - [wire_elo_to_curriculum] ELO events wired to curriculum rebalance (threshold=30.0)
2026-01-22 23:09:18,235 - app.training.curriculum_feedback - INFO - [PlateauToCurriculumWatcher] Subscribed to PLATEAU_DETECTED events
2026-01-22 23:09:18,235 - app.training.curriculum_feedback - INFO - [wire_plateau_to_curriculum] PLATEAU_DETECTED events wired to curriculum rebalance (cooldown=600.0s, boost=0.3)
2026-01-22 23:09:18,235 - app.training.curriculum_feedback - INFO - [TournamentToCurriculumWatcher] Subscribed to EVALUATION_COMPLETED events
2026-01-22 23:09:18,235 - app.training.curriculum_feedback - INFO - [wire_tournament_to_curriculum] EVALUATION_COMPLETED events wired to curriculum (low=0.45, high=0.65)
2026-01-22 23:09:18,236 - app.training.curriculum_feedback - INFO - [PromotionToCurriculumWatcher] Subscribed to MODEL_PROMOTED events
2026-01-22 23:09:18,236 - app.training.curriculum_feedback - INFO - [wire_promotion_to_curriculum] PROMOTION_COMPLETE events wired to curriculum (failure_urgency=high)
2026-01-22 23:09:18,236 - app.training.curriculum_feedback - INFO - [QualityFeedbackWatcher] Subscribed to QUALITY_SCORE_UPDATED events
2026-01-22 23:09:18,236 - app.training.curriculum_feedback - INFO - [wire_quality_to_curriculum] Quality events wired to selfplay budget adjustment (window=100)
2026-01-22 23:09:18,240 - app.training.curriculum_feedback - INFO - [wire_epoch_to_curriculum] EPOCH_COMPLETED events wired to curriculum (check_interval=5 epochs)
2026-01-22 23:09:18,245 - app.training.curriculum_feedback - INFO - CurriculumFeedback: OpponentWinRateTracker integrated
2026-01-22 23:09:18,245 - app.training.curriculum_feedback - INFO - Wired OpponentWinRateTracker to CurriculumFeedback
2026-01-22 23:09:18,245 - app.training.curriculum_feedback - INFO - [wire_all_curriculum_feedback] Wired opponent tracker to curriculum
2026-01-22 23:09:18,245 - app.training.curriculum_feedback - INFO - [EarlyStopToCurriculumWatcher] Subscribed to TRAINING_EARLY_STOPPED events
2026-01-22 23:09:18,246 - app.training.curriculum_feedback - INFO - [wire_early_stop_to_curriculum] TRAINING_EARLY_STOPPED events wired to curriculum boost
2026-01-22 23:09:18,246 - app.training.curriculum_feedback - INFO - [wire_all_curriculum_feedback] Wired 8 curriculum feedback integrations
2026-01-22 23:09:18,246 - app.coordination.curriculum_integration - INFO - [wire_all_feedback_loops] Wired 9 feedback integrations: momentum_bridge, pfsp_weakness, promotion_failed_curriculum, promotion_completed_curriculum, quality_penalty_curriculum, regression_critical_curriculum, architecture_curriculum, quality_temperature, curriculum_feedback
2026-01-22 23:09:18,246 - p2p_orchestrator - WARNING - Feedback loops: partial wiring - Unknown error
2026-01-22 23:09:18,246 - p2p_orchestrator - INFO - Subscribed to daemon status events
2026-01-22 23:09:18,246 - p2p_orchestrator - INFO - Subscribed to training feedback signals
2026-01-22 23:09:18,246 - p2p_orchestrator - INFO - Subscribed to manager lifecycle and health events
2026-01-22 23:09:18,246 - p2p_orchestrator - INFO - [P2P] Event subscriptions: daemon=✓, feedback=✓, manager=✓
[P2P] Initialized node mac-studio on 0.0.0.0:8770 (advertise 100.107.168.125:8770)
2026-01-22 23:09:18,246 - p2p_orchestrator - INFO - RingRift path: /Users/armand/Development/RingRift
2026-01-22 23:09:18,246 - p2p_orchestrator - INFO - Version: HEAD@5f35927b3
2026-01-22 23:09:18,246 - p2p_orchestrator - INFO - Known peers: ['http://100.126.21.102:8770', 'http://100.94.174.19:8770', 'http://100.67.131.72:8770', '100.94.201.92:8770', '100.67.131.72:8770', '100.126.21.102:8770', '100.110.28.41:8770', '100.94.174.19:8770']
2026-01-22 23:09:18,246 - p2p_orchestrator - INFO - Auth: disabled (set RINGRIFT_CLUSTER_AUTH_TOKEN to enable)
2026-01-22 23:09:18,246 - p2p_orchestrator - INFO - HybridTransport: enabled (HTTP with SSH fallback for Vast)
2026-01-22 23:09:18,246 - app.p2p.swim_adapter - INFO - SWIM seeds from cluster_config: [('100.94.174.19', 7947), ('100.67.131.72', 7947), ('100.126.21.102', 7947), ('100.92.222.49', 7947), ('100.77.77.122', 7947), ('100.69.164.58', 7947), ('100.94.201.92', 7947)]
2026-01-22 23:09:18,246 - p2p_orchestrator - INFO - SWIM membership manager initialized for mac-studio (with callbacks)
2026-01-22 23:09:18,246 - p2p_orchestrator - INFO - LoopManager: initialized for extracted background loops
2026-01-22 23:09:18,663 - p2p_orchestrator - INFO - [P2P] Manager health: 0/8 healthy, 8 starting (grace period: 59s remaining)
2026-01-22 23:09:18,663 - p2p_orchestrator - INFO - P2P orchestrator initialized successfully: mac-studio
2026-01-22 23:09:18,663 - p2p_orchestrator - INFO - [P2P] Event emitters available - P2P events will be published
2026-01-22 23:09:18,664 - p2p_orchestrator - INFO - Starting P2P orchestrator main loop: mac-studio
2026-01-22 23:09:18,664 - p2p_orchestrator - INFO - Started isolated health server thread (port 8772)
2026-01-22 23:09:18,664 - p2p_orchestrator - INFO - [Startup Validation] SWIM protocol available (membership_mode=hybrid)
2026-01-22 23:09:18,665 - p2p_orchestrator - INFO - [Startup Validation] Raft protocol available (consensus_mode=hybrid)
2026-01-22 23:09:18,665 - p2p_orchestrator - INFO - [Startup Validation] Protocol config: membership=hybrid, consensus=hybrid
2026-01-22 23:09:18,665 - p2p_orchestrator - INFO - Isolated health server started on 0.0.0.0:8772
2026-01-22 23:09:21,314 - p2p_orchestrator - INFO - [Startup Validation] Voter quorum OK: 4/8 voters reachable
2026-01-22 23:09:21,314 - scripts.p2p.resource_detector - WARNING - [ResourceDetector] GPU detected (Apple MPS) but PyTorch has no CUDA support. Fix: pip install torch --index-url https://download.pytorch.org/whl/cu128
2026-01-22 23:09:21,314 - p2p_orchestrator - WARNING - [Startup Validation] GPU detected (Apple MPS) but PyTorch has no CUDA support. Fix: pip install torch --index-url https://download.pytorch.org/whl/cu128
/Users/armand/Development/RingRift/ai-service/scripts/p2p_orchestrator.py:30867: DeprecationWarning: get_event_bus() from data_events is deprecated. Use get_router() from app.coordination.event_router instead.
  get_event_bus().emit(
2026-01-22 23:09:21,314 - p2p_orchestrator - WARNING - [Startup Validation] Completed with 1 warnings. Managers: 2/3 available
2026-01-22 23:09:21,319 - scripts.p2p.routes - WARNING - Missing 2 handlers: ['handle_probe_vast_nodes', 'handle_gpu_rankings']...
2026-01-22 23:09:21,319 - p2p_orchestrator - INFO - Registered 195 HTTP routes from route registry
2026-01-22 23:09:21,321 - scripts.p2p.handlers.file_download - INFO - Registered 5 file transfer routes (4 download, 1 upload)
2026-01-22 23:09:21,321 - p2p_orchestrator - INFO - Registered 5 file download routes for HTTP-based sync
2026-01-22 23:09:21,321 - scripts.p2p.handlers.network_health - INFO - Registered network health routes: /network/health, /network/reconnect, /network/status
2026-01-22 23:09:21,321 - scripts.p2p.handlers.models - INFO - [ModelHandler] Registered 2 model routes
2026-01-22 23:09:21,321 - p2p_orchestrator - INFO - Registered 2 model inventory routes
2026-01-22 23:09:21,343 - scripts.verify_nfs_sync - WARNING - Could not auto-detect NFS root. Set RINGRIFT_NFS_PATH environment variable.
2026-01-22 23:09:21,343 - scripts.verify_nfs_sync - INFO - NFS not configured, skipping sync verification
2026-01-22 23:09:21,345 - app.distributed.cluster_manifest - INFO - ClusterManifest initialized: node=MacBook-Pro-5.local, db=/Users/armand/Development/RingRift/ai-service/data/cluster_manifest.db
2026-01-22 23:09:21,345 - app.distributed.cluster_manifest - INFO - [ClusterManifest] Subscribed to real-time events (NEW_GAMES_AVAILABLE, GAMES_UPLOADED_TO_S3, GAMES_UPLOADED_TO_OWC, BACKUP_COMPLETED)
2026-01-22 23:09:21,345 - app.coordination.sync_router - INFO - [SyncRouter] External storage configured: mac-studio -> /Volumes/RingRift-Data
2026-01-22 23:09:21,345 - app.coordination.sync_router - INFO - SyncRouter initialized: 30 nodes, S3 enabled=True
2026-01-22 23:09:21,345 - p2p_orchestrator - INFO - SyncRouter: initialized for intelligent data routing
2026-01-22 23:09:21,346 - app.coordination.sync_router - INFO - [SyncRouter] Wired to event router (NEW_GAMES_AVAILABLE, TRAINING_STARTED, HOST_ONLINE/OFFLINE, NODE_RECOVERED, CLUSTER_CAPACITY_CHANGED, MODEL_SYNC_REQUESTED, SYNC_STALLED, SYNC_FAILURE_CRITICAL, BACKPRESSURE_ACTIVATED/RELEASED, CONFIG_UPDATED)
2026-01-22 23:09:21,346 - p2p_orchestrator - INFO - SyncRouter: wired to event system
2026-01-22 23:09:21,346 - p2p_orchestrator - INFO - Cooldown manager probe function wired
2026-01-22 23:09:21,346 - scripts.p2p.connection_pool - INFO - Connection pool cluster size callback configured
2026-01-22 23:09:21,346 - p2p_orchestrator - INFO - Connection pool dynamic sizing wired
2026-01-22 23:09:21,346 - p2p_orchestrator - INFO - ULSM: Leadership state machine broadcast callback wired
2026-01-22 23:09:21,346 - p2p_orchestrator - INFO - HTTP server started on 0.0.0.0:8770 (IPv4, backlog=1024)
2026-01-22 23:09:21,346 - p2p_orchestrator - INFO - HTTP server also listening on [::]:8770 (IPv6)
2026-01-22 23:09:22,026 - app.coordination.resource_optimizer - INFO - Loaded PID config from /Users/armand/Development/RingRift/ai-service/config/unified_loop.yaml: kp=0.3, ki=0.05, kd=0.1
2026-01-22 23:09:22,116 - app.coordination.resource_optimizer - INFO - ResourceOptimizer initialized: node=local-mac, target=60.0-80.0%
2026-01-22 23:09:22,493 - app.distributed.hosts - INFO - Loaded 30 remote host(s) from /Users/armand/Development/RingRift/ai-service/config/distributed_hosts.yaml
2026-01-22 23:09:22,493 - app.distributed.dynamic_registry - INFO - Loaded 30 hosts into dynamic registry
2026-01-22 23:09:22,494 - app.distributed.dynamic_registry - INFO - Loaded dynamic registry state from /Users/armand/Development/RingRift/ai-service/logs/p2p_orchestrator/dynamic_registry.json
2026-01-22 23:09:36,507 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:09:36 -0600] "GET /health HTTP/1.1" 200 715 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:09:43,767 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:09:44,125 - app.coordination.node_policies - INFO - Loaded 5 node policies, 0 overrides
2026-01-22 23:09:44,127 - app.coordination.work_queue - INFO - Work queue database initialized at /Users/armand/Development/RingRift/ai-service/data/work_queue.db
2026-01-22 23:09:44,182 - app.coordination.work_queue - INFO - Loaded 4022 work items from database
2026-01-22 23:09:44,183 - app.coordination.work_queue - INFO - [WorkQueue] Restored backpressure active state from DB (pending=4022)
2026-01-22 23:09:44,553 - aiohttp.access - INFO - ::1 [22/Jan/2026:23:09:43 -0600] "GET /status HTTP/1.1" 200 20308 "-" "curl/8.7.1"
2026-01-22 23:09:53,684 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:09:52 -0600] "POST /gossip HTTP/1.1" 200 1225 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:09:56,727 - aiohttp.access - INFO - 127.0.0.1 [22/Jan/2026:23:09:56 -0600] "GET /health HTTP/1.1" 200 733 "-" "Python-urllib/3.10"
2026-01-22 23:10:00,125 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:10:00,753 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:09:59 -0600] "GET /status HTTP/1.1" 200 17053 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:10:04,611 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:10:05,283 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:10:04 -0600] "GET /status HTTP/1.1" 200 17054 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:10:07,418 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:10:07 -0600] "GET /peers HTTP/1.1" 404 174 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:10:08,274 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:10:08 -0600] "GET /health HTTP/1.1" 200 712 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:10:11,867 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:10:11 -0600] "POST /gossip HTTP/1.1" 200 1233 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:10:12,265 - app.distributed.storage_provider - INFO - Storage provider initialized: local
2026-01-22 23:10:14,443 - aiohttp.access - INFO - 100.109.195.71 [22/Jan/2026:23:10:14 -0600] "GET /health HTTP/1.1" 200 715 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:10:16,347 - app.distributed.data_catalog - INFO - Discovered 68 data sources
2026-01-22 23:10:16,348 - aiohttp.access - INFO - 100.67.131.72 [22/Jan/2026:23:10:12 -0600] "GET /game_counts HTTP/1.1" 200 485 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:10:16,615 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:10:16 -0600] "GET /health HTTP/1.1" 200 694 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:10:21,458 - aiohttp.access - INFO - 127.0.0.1 [22/Jan/2026:23:10:21 -0600] "GET /health HTTP/1.1" 200 694 "-" "curl/8.7.1"
2026-01-22 23:10:24,971 - aiohttp.access - INFO - 100.109.195.71 [22/Jan/2026:23:10:24 -0600] "POST /gossip HTTP/1.1" 200 1264 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:10:28,949 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:10:29,002 - p2p_orchestrator - WARNING - [VoterHealth] Status: 3/8 voters alive, quorum=OK, offline: ['hetzner-cpu3', 'macbook-pro-3', 'macbook-pro-4', 'macbook-pro-5', 'vultr-a100-20gb']
2026-01-22 23:10:29,619 - aiohttp.access - INFO - 100.109.195.71 [22/Jan/2026:23:10:28 -0600] "GET /status HTTP/1.1" 200 17085 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:10:36,774 - aiohttp.access - INFO - 100.109.195.71 [22/Jan/2026:23:10:36 -0600] "GET /peers HTTP/1.1" 404 174 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:10:38,037 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:10:38 -0600] "GET /peers HTTP/1.1" 404 174 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:10:38,567 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:10:38 -0600] "GET /health HTTP/1.1" 200 712 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:10:45,484 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:10:45,540 - app.tournament.unified_elo_db - INFO - EloDatabase initialized at /Users/armand/Development/RingRift/ai-service/data/unified_elo.db
2026-01-22 23:10:45,607 - p2p_orchestrator - WARNING - [VoterHealth] Status: 3/8 voters alive, quorum=OK, offline: ['hetzner-cpu3', 'macbook-pro-3', 'macbook-pro-4', 'macbook-pro-5', 'vultr-a100-20gb']
2026-01-22 23:10:45,852 - aiohttp.access - INFO - 100.109.195.71 [22/Jan/2026:23:10:45 -0600] "GET /health HTTP/1.1" 200 696 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:10:46,404 - aiohttp.access - INFO - ::1 [22/Jan/2026:23:10:44 -0600] "GET /status HTTP/1.1" 200 17089 "-" "curl/8.7.1"
2026-01-22 23:10:47,457 - aiohttp.access - INFO - 100.67.131.72 [22/Jan/2026:23:10:47 -0600] "GET /health HTTP/1.1" 200 696 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:10:47,458 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:10:47 -0600] "GET /health HTTP/1.1" 200 696 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:10:59,026 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:10:58 -0600] "POST /gossip HTTP/1.1" 200 1284 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:11:05,032 - aiohttp.access - INFO - 100.109.195.71 [22/Jan/2026:23:11:04 -0600] "POST /gossip HTTP/1.1" 200 1287 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:11:09,114 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:11:09,168 - p2p_orchestrator - WARNING - [VoterHealth] Status: 3/8 voters alive, quorum=OK, offline: ['hetzner-cpu3', 'macbook-pro-3', 'macbook-pro-4', 'macbook-pro-5', 'vultr-a100-20gb']
2026-01-22 23:11:09,784 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:11:08 -0600] "GET /status HTTP/1.1" 200 13255 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:11:12,986 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:11:12 -0600] "GET /health HTTP/1.1" 200 717 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:11:25,656 - aiohttp.access - INFO - 100.109.195.71 [22/Jan/2026:23:11:25 -0600] "GET /health HTTP/1.1" 200 717 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:11:30,868 - aiohttp.access - INFO - 127.0.0.1 [22/Jan/2026:23:11:30 -0600] "GET /health HTTP/1.1" 200 714 "-" "curl/8.7.1"
2026-01-22 23:11:34,209 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:11:34,267 - p2p_orchestrator - WARNING - [VoterHealth] Status: 3/8 voters alive, quorum=OK, offline: ['hetzner-cpu3', 'macbook-pro-3', 'macbook-pro-4', 'macbook-pro-5', 'vultr-a100-20gb']
2026-01-22 23:11:35,002 - aiohttp.access - INFO - 100.109.195.71 [22/Jan/2026:23:11:33 -0600] "GET /status HTTP/1.1" 200 11507 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:11:40,341 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:11:40 -0600] "GET /game_counts HTTP/1.1" 200 485 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:11:47,523 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:11:47,583 - p2p_orchestrator - WARNING - [VoterHealth] Status: 3/8 voters alive, quorum=OK, offline: ['hetzner-cpu3', 'macbook-pro-3', 'macbook-pro-4', 'macbook-pro-5', 'vultr-a100-20gb']
2026-01-22 23:11:48,252 - aiohttp.access - INFO - ::1 [22/Jan/2026:23:11:46 -0600] "GET /status HTTP/1.1" 200 11513 "-" "curl/8.7.1"
2026-01-22 23:11:58,475 - aiohttp.access - INFO - 127.0.0.1 [22/Jan/2026:23:11:58 -0600] "GET /health HTTP/1.1" 200 733 "-" "Python-urllib/3.10"
2026-01-22 23:11:59,454 - aiohttp.access - INFO - 100.109.195.71 [22/Jan/2026:23:11:58 -0600] "POST /heartbeat HTTP/1.1" 200 2293 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:12:03,129 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:12:02 -0600] "POST /heartbeat HTTP/1.1" 200 2303 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:12:06,455 - aiohttp.access - INFO - 100.109.195.71 [22/Jan/2026:23:12:06 -0600] "GET /health HTTP/1.1" 200 714 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:12:16,075 - scripts.p2p.handlers.selfplay_api - INFO - Started GPU selfplay job selfplay-mac-studio-1769145136: square8/2p, 100 games
2026-01-22 23:12:16,076 - aiohttp.access - INFO - 100.94.201.92 [22/Jan/2026:23:12:16 -0600] "POST /selfplay/start HTTP/1.1" 200 307 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:12:16,128 - scripts.p2p.handlers.selfplay_api - INFO - Started GPU selfplay job selfplay-mac-studio-1769145136: hex8/2p, 100 games
2026-01-22 23:12:16,129 - aiohttp.access - INFO - 100.94.201.92 [22/Jan/2026:23:12:16 -0600] "POST /selfplay/start HTTP/1.1" 200 304 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:12:17,079 - scripts.p2p.managers.job_manager - WARNING - Selfplay job selfplay-mac-studio-1769145136 failed: 
2026-01-22 23:12:19,623 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:12:19,678 - p2p_orchestrator - WARNING - [VoterHealth] Status: 3/8 voters alive, quorum=OK, offline: ['hetzner-cpu3', 'macbook-pro-3', 'macbook-pro-4', 'macbook-pro-5', 'vultr-a100-20gb']
2026-01-22 23:12:20,276 - aiohttp.access - INFO - 127.0.0.1 [22/Jan/2026:23:12:19 -0600] "GET /status HTTP/1.1" 200 18923 "-" "curl/8.7.1"
2026-01-22 23:12:22,059 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:12:22 -0600] "GET /game_counts HTTP/1.1" 200 485 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:12:22,060 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:12:22 -0600] "GET /game_counts HTTP/1.1" 200 485 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:12:22,972 - scripts.p2p.handlers.election - INFO - [mac-studio] Lease epoch 2 supersedes cached 0, clearing old grant to vultr-a100-20gb
2026-01-22 23:12:23,103 - aiohttp.access - INFO - 100.94.201.92 [22/Jan/2026:23:12:22 -0600] "POST /election/lease HTTP/1.1" 200 385 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:12:27,132 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:12:27,156 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:12:27 -0600] "GET /peers HTTP/1.1" 404 174 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:12:27,184 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:12:27 -0600] "GET /game_counts HTTP/1.1" 200 485 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:12:27,191 - p2p_orchestrator - WARNING - [VoterHealth] Status: 3/8 voters alive, quorum=OK, offline: ['hetzner-cpu3', 'macbook-pro-3', 'macbook-pro-4', 'macbook-pro-5', 'vultr-a100-20gb']
2026-01-22 23:12:27,191 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:12:27 -0600] "GET /game_counts HTTP/1.1" 200 485 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:12:27,831 - aiohttp.access - INFO - 127.0.0.1 [22/Jan/2026:23:12:26 -0600] "GET /status HTTP/1.1" 200 18625 "-" "curl/8.7.1"
2026-01-22 23:12:32,588 - aiohttp.access - INFO - 127.0.0.1 [22/Jan/2026:23:12:32 -0600] "GET /health HTTP/1.1" 200 716 "-" "curl/8.7.1"
2026-01-22 23:12:40,383 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:12:39 -0600] "POST /gossip HTTP/1.1" 200 1288 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:12:42,094 - p2p_orchestrator - INFO - [P2P] Startup announcements: 3/8 peers reachable
2026-01-22 23:12:42,095 - p2p_orchestrator - INFO - [LoopManager] Phase 4 startup: EXTRACTED_LOOPS_ENABLED=True
2026-01-22 23:12:42,095 - p2p_orchestrator - INFO - [LoopManager] _register_extracted_loops called, already_registered=False
2026-01-22 23:12:42,095 - p2p_orchestrator - INFO - [LoopManager] Got manager: <scripts.p2p.loops.base.LoopManager object at 0x132c93460>
2026-01-22 23:12:42,095 - p2p_orchestrator - INFO - [LoopManager] OrphanProcessDetectionLoop registered (zombie cleanup)
2026-01-22 23:12:42,095 - p2p_orchestrator - INFO - [P2P] SpawnVerificationLoop enabled for job spawn tracking
2026-01-22 23:12:42,095 - p2p_orchestrator - INFO - [P2P] PredictiveScalingLoop enabled for proactive job spawning
2026-01-22 23:12:42,095 - p2p_orchestrator - INFO - [P2P] JobReassignmentLoop enabled for faster orphaned job recovery
2026-01-22 23:12:42,102 - scripts.p2p.adapters.scale_adapters - INFO - CompositeScaleAdapter initialized with providers: []
2026-01-22 23:12:42,102 - p2p_orchestrator - INFO - [P2P] AutoScalingLoop enabled with reluctant termination
2026-01-22 23:12:42,102 - p2p_orchestrator - INFO - ModelFetchLoop: registered for training node model fetching
2026-01-22 23:12:42,102 - p2p_orchestrator - INFO - [LoopManager] TailscalePeerDiscoveryLoop registered
2026-01-22 23:12:42,102 - p2p_orchestrator - INFO - [LoopManager] PeerCleanupLoop registered
2026-01-22 23:12:42,103 - p2p_orchestrator - INFO - [LoopManager] GossipStateCleanupLoop registered
2026-01-22 23:12:42,103 - p2p_orchestrator - INFO - [LoopManager] QuorumCrisisDiscoveryLoop registered
2026-01-22 23:12:42,103 - p2p_orchestrator - INFO - [LoopManager] WorkerPullLoop registered (with work discovery manager)
2026-01-22 23:12:42,103 - p2p_orchestrator - INFO - [LoopManager] RemoteP2PRecoveryLoop registered (node: mac-studio, leader-only execution)
2026-01-22 23:12:42,103 - p2p_orchestrator - INFO - [LoopManager] LeaderProbeLoop registered (fast leader recovery)
2026-01-22 23:12:42,103 - p2p_orchestrator - INFO - [LoopManager] RelayHealthLoop registered (NAT relay monitoring)
2026-01-22 23:12:42,103 - p2p_orchestrator - INFO - [P2P] TrainingSyncLoop registered (critical for training pipeline)
2026-01-22 23:12:42,103 - p2p_orchestrator - INFO - [P2P] DataAggregationLoop registered (important for training data)
2026-01-22 23:12:42,103 - p2p_orchestrator - INFO - [P2P] HealthAggregationLoop registered with auto-recovery (Session 17.26)
2026-01-22 23:12:42,103 - p2p_orchestrator - INFO - [P2P] IpDiscoveryLoop registered (handles dynamic IPs)
2026-01-22 23:12:42,103 - p2p_orchestrator - INFO - [P2P] TailscaleRecoveryLoop registered (handles Tailscale failures)
2026-01-22 23:12:42,103 - p2p_orchestrator - INFO - [P2P] TailscaleKeepaliveLoop registered (userspace_mode=True, interval=30.0s)
2026-01-22 23:12:42,103 - p2p_orchestrator - INFO - [P2P] ClusterHealingLoop registered (interval=300.0s, max_heal=5)
2026-01-22 23:12:42,103 - p2p_orchestrator - INFO - [P2P] UdpDiscoveryLoop registered (LAN peer discovery)
2026-01-22 23:12:42,104 - p2p_orchestrator - INFO - [P2P] SplitBrainDetectionLoop registered (partition detection)
2026-01-22 23:12:42,104 - p2p_orchestrator - INFO - [P2P] AutonomousQueuePopulationLoop registered (fallback queue population)
2026-01-22 23:12:42,104 - p2p_orchestrator - INFO - [P2P] HttpServerHealthLoop registered (with graceful restart support)
2026-01-22 23:12:42,104 - p2p_orchestrator - INFO - [P2P] ComprehensiveEvaluationLoop registered (6-hour model evaluation cycle)
2026-01-22 23:12:42,104 - p2p_orchestrator - INFO - [P2P] TournamentDataPipelineLoop registered (hourly tournament data export)
2026-01-22 23:12:42,104 - scripts.p2p.loops.maintenance_loops - INFO - [CircuitBreakerDecay] External alive check callback configured
2026-01-22 23:12:42,104 - p2p_orchestrator - INFO - [P2P] CircuitBreakerDecayLoop registered (enabled=True, ttl=3600.0s, external_check=True)
2026-01-22 23:12:42,104 - p2p_orchestrator - INFO - [LoopManager] VoterConfigSyncLoop registered
2026-01-22 23:12:42,104 - p2p_orchestrator - INFO - [LoopManager] StabilityController registered (self-healing)
2026-01-22 23:12:42,104 - p2p_orchestrator - INFO - [LoopManager] PeerRecoveryLoop registered (flapping peer prioritization)
2026-01-22 23:12:42,104 - p2p_orchestrator - INFO - LoopManager: registered 44 loops
2026-01-22 23:12:42,104 - scripts.p2p.loops.base - INFO - [p2p_loops] Starting 44 loops in order: ['queue_populator', 'elo_sync', 'job_reaper', 'orphan_process_detection', 'idle_detection', 'spawn_verification', 'predictive_scaling', 'job_reassignment', 'auto_scaling', 'work_queue_maintenance', 'nat_management', 'manifest_collection', 'data_management', 'model_sync', 'model_fetch', 'validation', 'tailscale_peer_discovery', 'peer_cleanup', 'gossip_state_cleanup', 'quorum_crisis_discovery', 'worker_pull', 'follower_discovery', 'self_healing', 'remote_p2p_recovery', 'leader_probe', 'relay_health', 'predictive_monitoring', 'training_sync', 'data_aggregation', 'health_aggregation', 'ip_discovery', 'tailscale_recovery', 'tailscale_keepalive', 'cluster_healing', 'udp_discovery', 'split_brain_detection', 'autonomous_queue_population', 'http_server_health', 'comprehensive_evaluation', 'tournament_data_pipeline', 'circuit_breaker_decay', 'voter_config_sync', 'stability_controller', 'peer_recovery']
2026-01-22 23:12:42,104 - p2p_orchestrator - INFO - Sending initial heartbeat burst to known peers
2026-01-22 23:12:42,827 - p2p_orchestrator - INFO - Starting voter heartbeat loop (interval=10s)
2026-01-22 23:12:43,472 - app.p2p.swim_adapter - INFO - SWIM using TCP transport (attempt 1)
2026-01-22 23:12:43,472 - p2p_orchestrator - INFO - Vast IP update loop started
2026-01-22 23:12:43,472 - p2p_orchestrator - INFO - AWS IP update loop started
2026-01-22 23:12:43,472 - p2p_orchestrator - INFO - Tailscale IP update loop started
2026-01-22 23:12:43,473 - scripts.p2p.loops.base - INFO - [queue_populator] Starting loop (interval=60.0s)
2026-01-22 23:12:43,474 - scripts.p2p.loops.base - INFO - [elo_sync] Starting loop (interval=300.0s)
2026-01-22 23:12:43,487 - swim.transport.tcp - INFO - TCP transport bound to all interfaces (0.0.0.0:7947), identifying as 0.0.0.0:7947
2026-01-22 23:12:43,487 - swim.protocol.node - INFO - Transport successfully bound to 0.0.0.0:7947
2026-01-22 23:12:43,487 - swim.protocol.member - INFO - Added new member: 0.0.0.0:7947 (method: self)
2026-01-22 23:12:43,487 - swim.protocol.member - INFO - Created member list with self at 0.0.0.0:7947
2026-01-22 23:12:43,487 - swim.protocol.member - INFO - Added new member: 100.94.174.19:7947 (method: unknown)
2026-01-22 23:12:43,487 - swim.protocol.member - INFO - Added new member: 100.67.131.72:7947 (method: unknown)
2026-01-22 23:12:43,487 - swim.protocol.member - INFO - Added new member: 100.126.21.102:7947 (method: unknown)
2026-01-22 23:12:43,487 - swim.protocol.member - INFO - Added new member: 100.92.222.49:7947 (method: unknown)
2026-01-22 23:12:43,487 - swim.protocol.member - INFO - Added new member: 100.77.77.122:7947 (method: unknown)
2026-01-22 23:12:43,487 - swim.protocol.member - INFO - Added new member: 100.69.164.58:7947 (method: unknown)
2026-01-22 23:12:43,487 - swim.protocol.member - INFO - Added new member: 100.94.201.92:7947 (method: unknown)
2026-01-22 23:12:43,487 - swim.protocol.node - INFO - Added 7 seed nodes to member list
2026-01-22 23:12:43,487 - swim.protocol.failure_detector - INFO - Failure detector initialized with Lifeguard enhancements
2026-01-22 23:12:43,488 - swim.protocol.disseminator - INFO - Gossip service initialized with push-pull synchronization
2026-01-22 23:12:43,488 - swim.protocol.sync - INFO - Sync service initialized
2026-01-22 23:12:43,488 - swim.protocol.node - INFO - Push-pull sync service enabled
2026-01-22 23:12:43,488 - swim.protocol.node - INFO - Metrics collection enabled for node 0.0.0.0:7947
2026-01-22 23:12:43,488 - swim.lifeguard.awareness - INFO - Awareness service initialized (min=0, max=8)
2026-01-22 23:12:43,488 - swim.lifeguard.timing - INFO - Timing service initialized with adaptive adjustments
2026-01-22 23:12:43,488 - swim.lifeguard.probe_rate - INFO - Probe rate service initialized with adaptive control
2026-01-22 23:12:43,488 - swim.protocol.node - INFO - Lifeguard enhancements enabled
2026-01-22 23:12:43,488 - swim.protocol.node - INFO - Node initialized at 0.0.0.0:7947 with enhanced reliability features
2026-01-22 23:12:43,488 - swim.protocol.node - INFO - Node created successfully at 0.0.0.0:7947
2026-01-22 23:12:43,488 - swim.transport.tcp - INFO - TCP receiver task started
2026-01-22 23:12:43,488 - swim.protocol.node - INFO - Node started at 0.0.0.0:7947
2026-01-22 23:12:43,488 - app.p2p.swim_adapter - INFO - SWIM bootstrapped from 7 seeds
2026-01-22 23:12:43,488 - app.p2p.swim_adapter - INFO - SWIM membership started on 0.0.0.0:7947 (failure_timeout=135.0s)
2026-01-22 23:12:43,488 - p2p_orchestrator - INFO - SWIM membership loop: started successfully
2026-01-22 23:12:43,489 - scripts.p2p.consensus_mixin - INFO - Deferred Raft init: found 2 partners, attempting initialization
2026-01-22 23:12:43,489 - scripts.p2p.consensus_mixin - INFO - Initializing Raft consensus: self=100.107.168.125:4321, partners=['100.94.174.19:4321', '100.67.131.72:4321'], mode=hybrid
2026-01-22 23:12:43,490 - scripts.p2p.consensus_mixin - INFO - Raft consensus initialized successfully
2026-01-22 23:12:43,490 - scripts.p2p.consensus_mixin - INFO - Deferred Raft initialization succeeded with partners: ['100.94.174.19:4321', '100.67.131.72:4321']
2026-01-22 23:12:43,490 - swim.protocol.sync - INFO - Sync service started
2026-01-22 23:12:44,241 - swim.transport.tcp - ERROR - Failed to establish connection to 100.126.21.102:7947: [Errno 61] Connect call failed ('100.126.21.102', 7947)
2026-01-22 23:12:44,241 - swim.transport.tcp - ERROR - Connection refused to 100.126.21.102:7947
2026-01-22 23:12:44,242 - app.distributed.hybrid_transport - INFO - [Transport] hetzner-cpu3: Switching to SSH after 3 HTTP failures
2026-01-22 23:12:44,242 - scripts.p2p.loops.base - INFO - [job_reaper] Starting loop (interval=300.0s)
2026-01-22 23:12:44,802 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:12:44,818 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:12:43 -0600] "POST /gossip HTTP/1.1" 200 1255 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:12:44,819 - p2p_orchestrator - INFO - DB consolidation: 40 DBs with 67 games to merge
2026-01-22 23:12:44,834 - p2p_orchestrator - INFO - Started DB merge (PID: 82534)
2026-01-22 23:12:44,835 - scripts.p2p.loops.base - INFO - [orphan_process_detection] Starting loop (interval=60.0s)
2026-01-22 23:12:44,875 - p2p_orchestrator - WARNING - [VoterHealth] Voter hetzner-cpu2 went OFFLINE (2/8 alive, quorum=2)
2026-01-22 23:12:44,876 - p2p_orchestrator - WARNING - [VoterHealth] Status: 2/8 voters alive, quorum=OK, offline: ['hetzner-cpu2', 'hetzner-cpu3', 'macbook-pro-3', 'macbook-pro-4', 'macbook-pro-5', 'vultr-a100-20gb']
2026-01-22 23:12:44,894 - swim.protocol.disseminator - ERROR - [ce1754fb] Error sending heartbeat to 100.126.21.102:7947: [Errno 61] Connect call failed ('100.126.21.102', 7947)
2026-01-22 23:12:44,896 - swim.lifeguard.awareness - INFO - LIFEGUARD: Increased awareness for 100.69.164.58:58827: 0 -> 1
2026-01-22 23:12:44,937 - scripts.p2p.loops.base - INFO - [idle_detection] Starting loop (interval=10.0s)
2026-01-22 23:12:45,023 - swim.transport.tcp - ERROR - Failed to establish connection to 100.69.164.58:58827: [Errno 61] Connect call failed ('100.69.164.58', 58827)
2026-01-22 23:12:45,023 - swim.transport.tcp - ERROR - Connection refused to 100.69.164.58:58827
2026-01-22 23:12:45,038 - scripts.p2p.loops.base - INFO - [spawn_verification] Starting loop (interval=5.0s)
2026-01-22 23:12:45,695 - p2p_orchestrator - INFO - LOCAL: Disk at 62% - triggering cleanup
2026-01-22 23:12:45,695 - p2p_orchestrator - INFO - Running local disk cleanup...
2026-01-22 23:12:46,834 - p2p_orchestrator - INFO - Disk monitor cleanup failed: 
2026-01-22 23:12:48,660 - p2p_orchestrator - INFO - DISTRIBUTED TRAINING: Claiming hexagonal_2p (7688 local games, leaderless for 210s)
2026-01-22 23:12:48,692 - scripts.p2p.managers.training_coordinator - WARNING - Dispatching training in degraded mode (quorum=minimum). Training may be interrupted if cluster health worsens.
2026-01-22 23:12:48,864 - swim.transport.tcp - ERROR - Failed to establish connection to 100.67.131.72:7947: [Errno 61] Connect call failed ('100.67.131.72', 7947)
2026-01-22 23:12:48,864 - swim.transport.tcp - ERROR - Connection refused to 100.67.131.72:7947
2026-01-22 23:12:48,982 - swim.protocol.sync - ERROR - [d3a17e5c] Error sending sync response to 100.69.164.58:58827: [Errno 61] Connect call failed ('100.69.164.58', 58827)
2026-01-22 23:12:48,982 - scripts.p2p.loops.base - INFO - [predictive_scaling] Starting loop (interval=30.0s)
2026-01-22 23:12:48,982 - swim.protocol.disseminator - ERROR - [ce1754fb] Error sending heartbeat to 100.67.131.72:7947: [Errno 61] Connect call failed ('100.67.131.72', 7947)
2026-01-22 23:12:48,983 - scripts.p2p.loops.base - INFO - [job_reassignment] Starting loop (interval=60.0s)
2026-01-22 23:12:50,530 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:12:50,548 - aiohttp.access - INFO - 127.0.0.1 [22/Jan/2026:23:12:44 -0600] "GET /status HTTP/1.1" 200 38253 "-" "Python/3.10 aiohttp/3.13.3"
2026-01-22 23:12:50,549 - scripts.p2p.loops.base - INFO - [auto_scaling] Starting loop (interval=120.0s)
2026-01-22 23:12:50,578 - p2p_orchestrator - WARNING - [VoterHealth] Status: 2/8 voters alive, quorum=OK, offline: ['hetzner-cpu2', 'hetzner-cpu3', 'macbook-pro-3', 'macbook-pro-4', 'macbook-pro-5', 'vultr-a100-20gb']
2026-01-22 23:12:50,659 - scripts.p2p.loops.coordination_loops - INFO - [AutoScaling] Scaling up by 3 nodes
2026-01-22 23:12:50,766 - scripts.p2p.loops.coordination_loops - INFO - [AutoScaling] Added 0 nodes: []
2026-01-22 23:12:50,766 - app.coordination.database_sync_manager - INFO - [elo] Discovered 2 nodes from P2P
2026-01-22 23:12:50,767 - scripts.p2p.loops.base - INFO - [work_queue_maintenance] Starting loop (interval=300.0s)
2026-01-22 23:12:50,767 - scripts.p2p.loops.job_loops - INFO - Work queue maintenance loop starting...
2026-01-22 23:12:50,780 - app.tournament.elo_sync_manager - INFO - EloSyncManager initialized: 11164 local matches
2026-01-22 23:12:50,780 - scripts.p2p.loops.elo_sync_loop - INFO - [elo_sync] Started with interval 300.0s (attempt 1/5)
2026-01-22 23:12:51,353 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:12:51,946 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:12:51,964 - scripts.p2p.loops.base - INFO - [nat_management] Starting loop (interval=60.0s)
2026-01-22 23:12:51,986 - scripts.p2p.loops.network_loops - INFO - Starting advanced NAT management loop
2026-01-22 23:12:51,999 - p2p_orchestrator - WARNING - [VoterHealth] Status: 2/8 voters alive, quorum=OK, offline: ['hetzner-cpu2', 'hetzner-cpu3', 'macbook-pro-3', 'macbook-pro-4', 'macbook-pro-5', 'vultr-a100-20gb']
2026-01-22 23:12:52,019 - p2p_orchestrator - WARNING - [VoterHealth] Status: 2/8 voters alive, quorum=OK, offline: ['hetzner-cpu2', 'hetzner-cpu3', 'macbook-pro-3', 'macbook-pro-4', 'macbook-pro-5', 'vultr-a100-20gb']
2026-01-22 23:12:52,845 - scripts.p2p.loops.base - INFO - [manifest_collection] Starting loop (interval=300.0s)
2026-01-22 23:12:52,845 - scripts.p2p.loops.manifest_collection_loop - INFO - [manifest_collection] Starting (first collection in 60.0s)
2026-01-22 23:12:52,874 - aiohttp.access - INFO - ::1 [22/Jan/2026:23:12:48 -0600] "GET /status HTTP/1.1" 200 38562 "-" "curl/8.7.1"
2026-01-22 23:12:52,874 - scripts.p2p.loops.base - INFO - [data_management] Starting loop (interval=300.0s)
2026-01-22 23:12:52,874 - scripts.p2p.loops.data_loops - INFO - [data_management] Starting (first run in 30.0s)
2026-01-22 23:12:53,476 - aiohttp.access - INFO - 127.0.0.1 [22/Jan/2026:23:12:50 -0600] "GET /status HTTP/1.1" 200 38702 "-" "Python/3.10 aiohttp/3.13.3"
2026-01-22 23:12:53,476 - aiohttp.access - INFO - 127.0.0.1 [22/Jan/2026:23:12:50 -0600] "GET /status HTTP/1.1" 200 38702 "-" "Python/3.10 aiohttp/3.13.3"
2026-01-22 23:12:53,477 - scripts.p2p.loops.base - INFO - [model_sync] Starting loop (interval=120.0s)
2026-01-22 23:12:53,477 - app.coordination.database_sync_manager - INFO - [elo] Discovered 2 nodes from P2P
2026-01-22 23:12:53,478 - app.coordination.database_sync_manager - INFO - [elo] Discovered 2 nodes from P2P
2026-01-22 23:12:53,577 - scripts.p2p.loops.base - INFO - [model_fetch] Starting loop (interval=60.0s)
2026-01-22 23:12:53,678 - scripts.p2p.loops.base - INFO - [validation] Starting loop (interval=300.0s)
2026-01-22 23:12:53,678 - scripts.p2p.loops.validation_loop - INFO - Validation loop: initial delay before first check
2026-01-22 23:12:53,779 - scripts.p2p.loops.base - INFO - [tailscale_peer_discovery] Starting loop (interval=60.0s)
2026-01-22 23:12:53,779 - scripts.p2p.loops.network_loops - INFO - [TailscalePeerDiscovery] Starting ALL-NODE peer discovery loop (bootstrap=60.0s, maintenance=120.0s, min_peers=5)
2026-01-22 23:12:53,889 - scripts.p2p.loops.base - INFO - [peer_cleanup] Starting loop (interval=300.0s)
2026-01-22 23:12:53,890 - scripts.p2p.loops.peer_cleanup_loop - INFO - [PeerCleanup] Purged 1 stale peers (tier2: 1, tier3: 0). Health ratio: 100.0% → 100.0%
2026-01-22 23:12:53,991 - scripts.p2p.loops.base - INFO - [gossip_state_cleanup] Starting loop (interval=300.0s)
2026-01-22 23:12:53,992 - scripts.p2p.loops.gossip_state_cleanup_loop - INFO - [GossipStateCleanup] Purged 5 entries: states=0, manifests=0, recovery=0, reputation=0, endpoints=5, promotion=0, jobs=0
2026-01-22 23:12:54,094 - scripts.p2p.loops.base - INFO - [quorum_crisis_discovery] Starting loop (interval=10.0s)
2026-01-22 23:12:54,094 - scripts.p2p.loops.quorum_crisis_discovery_loop - INFO - [QuorumCrisis] Started (crisis_interval: 10.0s, tcp_timeout: 3.0s, http_timeout: 5.0s)
2026-01-22 23:12:54,165 - p2p_orchestrator - INFO - Discovered voter hetzner-cpu3 from 100.94.174.19
2026-01-22 23:12:54,195 - scripts.p2p.loops.base - INFO - [worker_pull] Starting loop (interval=10.0s)
2026-01-22 23:12:54,195 - scripts.p2p.loops.job_loops - INFO - Worker pull loop starting...
2026-01-22 23:12:54,296 - scripts.p2p.loops.base - INFO - [follower_discovery] Starting loop (interval=60.0s)
2026-01-22 23:12:54,397 - scripts.p2p.loops.base - INFO - [self_healing] Starting loop (interval=60.0s)
2026-01-22 23:12:54,397 - scripts.p2p.loops.resilience_loops - INFO - Self-healing loop starting...
2026-01-22 23:12:54,499 - scripts.p2p.loops.base - INFO - [remote_p2p_recovery] Starting loop (interval=60.0s)
2026-01-22 23:12:54,600 - scripts.p2p.loops.base - INFO - [leader_probe] Starting loop (interval=10.0s)
2026-01-22 23:12:54,702 - scripts.p2p.loops.base - INFO - [relay_health] Starting loop (interval=30.0s)
2026-01-22 23:12:54,703 - scripts.p2p.loops.relay_health_loop - INFO - [RelayHealth] Starting relay health monitoring for 3 relays
2026-01-22 23:12:54,804 - scripts.p2p.loops.base - INFO - [predictive_monitoring] Starting loop (interval=300.0s)
2026-01-22 23:12:54,805 - scripts.p2p.loops.resilience_loops - INFO - Predictive monitoring loop starting...
2026-01-22 23:12:54,905 - scripts.p2p.loops.base - INFO - [training_sync] Starting loop (interval=300.0s)
2026-01-22 23:12:55,611 - scripts.p2p.loops.base - INFO - [data_aggregation] Starting loop (interval=300.0s)
2026-01-22 23:12:55,713 - scripts.p2p.loops.base - INFO - [health_aggregation] Starting loop (interval=30.0s)
2026-01-22 23:12:55,815 - scripts.p2p.loops.base - INFO - [ip_discovery] Starting loop (interval=300.0s)
2026-01-22 23:12:55,916 - scripts.p2p.loops.base - INFO - [tailscale_recovery] Starting loop (interval=120.0s)
2026-01-22 23:12:56,017 - scripts.p2p.loops.base - INFO - [tailscale_keepalive] Starting loop (interval=30.0s)
2026-01-22 23:12:56,093 - app.coordination.database_sync_manager - WARNING - [elo] Synced database failed validation: ['Database file not found']
2026-01-22 23:12:56,119 - scripts.p2p.loops.base - INFO - [cluster_healing] Starting loop (interval=300.0s)
2026-01-22 23:12:56,256 - scripts.p2p.loops.cluster_healing_loop - INFO - [ClusterHealing] Found 16 missing nodes
2026-01-22 23:12:56,256 - scripts.p2p.loops.cluster_healing_loop - INFO - [ClusterHealing] Attempting to heal 3/16 nodes (max_heal=3, dynamic=True)
2026-01-22 23:12:56,256 - scripts.p2p.loops.cluster_healing_loop - INFO - [ClusterHealing] Attempting to heal mac-studio
2026-01-22 23:12:56,268 - scripts.p2p.loops.base - INFO - [udp_discovery] Starting loop (interval=30.0s)
2026-01-22 23:12:57,281 - scripts.p2p.loops.base - INFO - [split_brain_detection] Starting loop (interval=60.0s)
2026-01-22 23:12:57,281 - scripts.p2p.loops.resilience_loops - INFO - Split-brain detection loop starting...
2026-01-22 23:12:57,925 - scripts.p2p.loops.autonomous_queue_loop - INFO - [AutonomousQueue] Started with config: no_leader_threshold=15.0s, starvation_threshold=10, check_interval=15.0s
2026-01-22 23:12:57,926 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:12:57 -0600] "GET /health HTTP/1.1" 200 716 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:12:57,926 - scripts.p2p.loops.base - INFO - [autonomous_queue_population] Starting loop (interval=15.0s)
2026-01-22 23:12:57,926 - scripts.p2p.loops.autonomous_queue_loop - WARNING - [AutonomousQueue] ACTIVATED: no_leader_for_16s (no_leader_duration=16s)
2026-01-22 23:12:57,926 - app.coordination.event_emission_helpers - INFO - [AutonomousQueue] Autonomous queue activated: no_leader
2026-01-22 23:12:58,034 - scripts.p2p.loops.base - INFO - [http_server_health] Starting loop (interval=10.0s)
2026-01-22 23:12:58,135 - scripts.p2p.loops.base - INFO - [comprehensive_evaluation] Starting loop (interval=21600s)
2026-01-22 23:12:58,237 - scripts.p2p.loops.base - INFO - [tournament_data_pipeline] Starting loop (interval=3600s)
2026-01-22 23:12:58,346 - scripts.p2p.loops.base - INFO - [circuit_breaker_decay] Starting loop (interval=300.0s)
2026-01-22 23:12:58,397 - scripts.p2p.loops.cluster_healing_loop - INFO - [ClusterHealing] mac-studio has P2P running (leader=None, peers=3), restarting with correct bootstrap
2026-01-22 23:12:58,447 - scripts.p2p.loops.base - INFO - [voter_config_sync] Starting loop (interval=30.0s)
2026-01-22 23:12:58,549 - scripts.p2p.loops.base - INFO - [stability_controller] Starting loop (interval=30.0s)
2026-01-22 23:12:58,549 - scripts.p2p.controllers.stability_controller - INFO - [StabilityController] First symptom check starting - self-healing ACTIVE
2026-01-22 23:12:58,649 - scripts.p2p.loops.base - INFO - [peer_recovery] Starting loop (interval=15.0s)
2026-01-22 23:12:58,649 - scripts.p2p.loops.peer_recovery_loop - INFO - [PeerRecovery] Probing 2/2 retired peers
2026-01-22 23:12:58,750 - scripts.p2p.leader_election - WARNING - Quorum degraded: 3/8 voters alive (2 required). One failure from minimum quorum.
2026-01-22 23:12:58,751 - scripts.p2p.loops.base - INFO - [p2p_loops] All 44 loops verified running
2026-01-22 23:12:58,751 - p2p_orchestrator - INFO - LoopManager: started 44/44 loops, job_reaper=running
2026-01-22 23:12:59,269 - app.coordination.database_sync_manager - INFO - [elo] Synced from 100.109.195.71
2026-01-22 23:12:59,270 - scripts.p2p.loops.elo_sync_loop - INFO - [elo_sync] Elo sync completed: 0 matches
2026-01-22 23:12:59,567 - p2p_orchestrator - INFO - Bootstrap: imported 8 new peers from 100.94.174.19:8770
2026-01-22 23:13:04,223 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:13:03 -0600] "POST /gossip HTTP/1.1" 200 35770 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:13:04,223 - scripts.p2p.loops.cluster_healing_loop - INFO - [ClusterHealing] Restarted P2P on mac-studio
2026-01-22 23:13:05,116 - aiohttp.access - INFO - 127.0.0.1 [22/Jan/2026:23:13:05 -0600] "GET /health HTTP/1.1" 200 697 "-" "curl/8.7.1"
2026-01-22 23:13:09,606 - p2p_orchestrator - INFO - [RelayHealthCheck] Relay hetzner-cpu3 unhealthy for test, switching to hetzner-cpu1
2026-01-22 23:13:13,472 - p2p_orchestrator - INFO - Starting dead peer reconnection loop (Phase 1 P2P stability fix)
2026-01-22 23:13:13,725 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:13:13,740 - p2p_orchestrator - INFO - [ClusterHealth] {"timestamp": 1769145193.740492, "node_id": "mac-studio", "leader_id": null, "is_leader": false, "alive_peers": 5, "total_peers": 15, "swim_peers": 0, "voters_alive": 3, "voters_total": 8, "quorum_ok": true, "election_in_progress": false, "uptime_seconds": 235}
2026-01-22 23:13:13,740 - scripts.p2p.loops.queue_populator_loop - INFO - [queue_populator] Starting with 30.0s initial delay
2026-01-22 23:13:13,817 - app.coordination.cluster_status_monitor - INFO - Loaded 30 hosts via cluster_config
2026-01-22 23:13:17,972 - app.core.ssh - WARNING - [SSHMetrics] Failure recorded: host=ssh4.vast.ai, transport=direct, category=other, error=bash: line 0: cd: /root/ringrift/ai-service: No such file or directory

2026-01-22 23:13:23,875 - app.core.ssh - WARNING - [SSHMetrics] Failure recorded: host=100.92.222.49, transport=tailscale, category=timeout, error=Command timed out after 10s
2026-01-22 23:13:23,986 - app.core.ssh - WARNING - [SSHMetrics] Failure recorded: host=89.169.110.185, transport=tailscale, category=timeout, error=Command timed out after 10s
2026-01-22 23:13:24,282 - app.core.ssh - WARNING - [SSHMetrics] Failure recorded: host=ssh8.vast.ai, transport=tailscale, category=timeout, error=Command timed out after 10s
2026-01-22 23:13:24,893 - app.core.ssh - WARNING - [SSHMetrics] Failure recorded: host=ssh6.vast.ai, transport=direct, category=timeout, error=Command timed out after 10s
2026-01-22 23:13:24,894 - app.coordination.unified_queue_populator - INFO - [QueuePopulator] Scaled queue depth: 50 -> 50 (for 24 active nodes)
2026-01-22 23:13:24,895 - app.coordination.unified_queue_populator - INFO - Loaded existing Elo for hex8_4p: 1545.2 (model: canonical_hex8_4p_retrained_v2, games: 5)
2026-01-22 23:13:24,895 - app.coordination.unified_queue_populator - INFO - Loaded existing Elo for square8_3p: 1262.7 (model: baseline_heuristic_square8_3p, games: 158)
2026-01-22 23:13:24,895 - app.coordination.unified_queue_populator - INFO - Loaded existing Elo for square8_4p: 1355.2 (model: baseline_heuristic_square8_4p, games: 164)
2026-01-22 23:13:24,895 - app.coordination.unified_queue_populator - INFO - Loaded Elo data: 0/12 configs at target (2000.0+ Elo)
2026-01-22 23:13:24,895 - app.coordination.unified_queue_populator - INFO - [QueuePopulator] Loaded curriculum weights
2026-01-22 23:13:30,597 - app.coordination.unified_queue_populator - INFO - [QueuePopulator] Loaded game counts from canonical DBs: 120,549 total across 12 configs
2026-01-22 23:13:30,597 - app.coordination.unified_queue_populator - INFO - [QueuePopulator] SelfplayScheduler integration enabled
2026-01-22 23:13:30,597 - scripts.p2p.loops.queue_populator_loop - INFO - [queue_populator] QueuePopulator initialized
2026-01-22 23:13:30,707 - scripts.p2p.managers.training_coordinator - INFO - Dispatch to nebius-h100-3 failed (attempt 1/3): , trying next node...
2026-01-22 23:13:38,556 - p2p_orchestrator - INFO - Converting 4069 hexagonal_2p JSONL games to NPZ...
2026-01-22 23:13:38,558 - scripts.p2p.loops.job_loops - INFO - Worker pull loop started
2026-01-22 23:13:38,798 - scripts.p2p.loops.peer_recovery_loop - WARNING - [PeerRecovery] BURST MODE ACTIVATED: 10/15 peers retired (66.7% > 30% threshold). Accelerating recovery: interval 5.0s, max_probes 50
2026-01-22 23:13:38,799 - scripts.p2p.loops.peer_recovery_loop - INFO - [PeerRecovery] [BURST] Probing 10/10 retired peers
2026-01-22 23:13:39,971 - scripts.p2p.loops.queue_populator_loop - WARNING - [queue_populator] FOLLOWER TAKEOVER: Leader unreachable for 58s, populating queue
2026-01-22 23:13:40,282 - app.coordination.unified_queue_populator - INFO - [QueuePopulator] Worker capacity limit: 100 -> 50 (capacity=50)
2026-01-22 23:13:40,283 - app.coordination.unified_queue_populator - WARNING - [QueuePopulator] Backing off for 1.0s (consecutive hard limit hits: 1, current backoff: 1.0s)
2026-01-22 23:13:40,283 - app.coordination.unified_queue_populator - WARNING - [QueuePopulator] Queue hard limit hit, entering backoff: [BACKPRESSURE] Queue at hard limit (4022/4000). Work item selfplay_square8_2p_1769145220283 rejected. Wait for queue to drain or use force=True.
2026-01-22 23:13:40,285 - app.coordination.unified_queue_populator - WARNING - [QueuePopulator] Backing off for 2.0s (consecutive hard limit hits: 2, current backoff: 2.0s)
2026-01-22 23:13:40,286 - app.coordination.unified_queue_populator - WARNING - [QueuePopulator] Backing off for 4.4s (consecutive hard limit hits: 3, current backoff: 4.0s)
2026-01-22 23:13:40,286 - app.coordination.unified_queue_populator - ERROR - [Exploration] Failed to add item for square8_2p: [BACKPRESSURE] Queue at hard limit (4022/4000). Work item selfplay_square8_2p_1769145220286 rejected. Wait for queue to drain or use force=True.
2026-01-22 23:13:40,318 - app.coordination.work_queue - WARNING -  Added work selfplay_square8_3p_1769145220286 despite backpressure (force=True): selfplay (priority: 60)
2026-01-22 23:13:40,319 - app.coordination.unified_queue_populator - ERROR - [Exploration] Failed to add item for square8_4p: [BACKPRESSURE] Queue at hard limit (4023/4000). Work item selfplay_square8_4p_1769145220318 rejected. Wait for queue to drain or use force=True.
2026-01-22 23:13:40,319 - app.coordination.unified_queue_populator - INFO - [Exploration] Added 1 exploration items for stale configs: square8_2p
2026-01-22 23:13:40,319 - app.coordination.unified_queue_populator - INFO - Populated queue with 1 items (selfplay=25, training=0, tournament=13, sweeps=0, exploration=1)
2026-01-22 23:13:40,418 - app.coordination.unified_queue_populator - INFO - [QueuePopulator] Backoff reset after 3 consecutive hard limit hits
2026-01-22 23:13:40,520 - app.coordination.unified_queue_populator - INFO - [QueuePopulator] HEALTH: queue_depth=10, backpressure=none, bp_duration=0.0s, drain_rate=0.00/min, partition_detected=False, circuit_state=closed, backoff_until=0.0, consecutive_hard_hits=0
2026-01-22 23:13:40,773 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:13:41,531 - scripts.p2p.loops.resilience_loops - INFO - Self-healing loop started
2026-01-22 23:13:41,820 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:13:41 -0600] "GET /health HTTP/1.1" 200 714 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:13:41,862 - aiohttp.access - INFO - 127.0.0.1 [22/Jan/2026:23:13:41 -0600] "GET /health HTTP/1.1" 200 351 "-" "Python/3.10 aiohttp/3.13.3"
2026-01-22 23:13:41,950 - p2p_orchestrator - INFO - [VoterHealth] Voter hetzner-cpu2 came ONLINE (3/8 alive, quorum=2)
2026-01-22 23:13:41,987 - p2p_orchestrator - WARNING - [VoterHealth] Status: 3/8 voters alive, quorum=OK, offline: ['hetzner-cpu3', 'macbook-pro-3', 'macbook-pro-4', 'macbook-pro-5', 'vultr-a100-20gb']
2026-01-22 23:13:42,043 - scripts.p2p.loops.job_loops - INFO - [WorkerPull] Claimed work autonomous-1e34b590: selfplay (source: autonomous)
2026-01-22 23:13:42,207 - scripts.p2p.managers.work_discovery_manager - INFO - [WorkDiscovery] MacBook MacBook-Pro-5.local matched mac-studio config, selfplay_enabled=false - disabling direct selfplay
2026-01-22 23:13:42,207 - p2p_orchestrator - INFO - Skipping selfplay work autonomous-1e34b590: selfplay_enabled=false for this node
2026-01-22 23:13:42,207 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:13:40 -0600] "POST /gossip HTTP/1.1" 200 0 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:13:42,207 - scripts.p2p.loops.queue_populator_loop - INFO - [queue_populator] Queue populated: +1 items, depth=10, unmet=12/12
2026-01-22 23:13:42,993 - aiohttp.access - INFO - 100.67.131.72 [22/Jan/2026:23:13:42 -0600] "POST /heartbeat HTTP/1.1" 200 2279 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:13:43,169 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:13:43 -0600] "GET /peers HTTP/1.1" 404 174 "-" "Python/3.10 aiohttp/3.13.2"
Metrics Report: {'timestamp': 1769145223.5016031, 'node_id': '0.0.0.0:7947', 'metrics': {'node_event': {'events': {'start': 1}}, 'bandwidth_bytes': {'counter': 230}, 'message_received': {'counter': 1}, 'peer_awareness': {'gauge': 1}, 'bandwidth_rate': {'gauge': 49.890663987185405}, 'ping_timeout': {'gauge': 0.5}}}
2026-01-22 23:13:44,041 - scripts.p2p.loops.cluster_healing_loop - WARNING - [ClusterHealing] Failed to heal mac-studio: restart_failed (failures: 1, backoff: 600s)
2026-01-22 23:13:44,042 - scripts.p2p.loops.cluster_healing_loop - INFO - [ClusterHealing] Attempting to heal macbook-pro-3
2026-01-22 23:13:44,057 - p2p_orchestrator - INFO - JSONL→NPZ conversion failed for hexagonal_2p: INFO:app.config.unified_config:Loaded unified config from /Users/armand/Development/RingRift/ai-service/config/unified_loop.yaml
INFO:app.config.unified_config:  Training threshold: 200
INFO:app.confi
2026-01-22 23:13:44,383 - scripts.p2p.handlers.training_control - INFO - Started NNUE training subprocess (PID 89837) for job nnue_hexagonal_2p_1769145168
2026-01-22 23:13:44,384 - aiohttp.access - INFO - 100.69.164.58 [22/Jan/2026:23:13:42 -0600] "POST /training/nnue/start HTTP/1.1" 200 190 "-" "Python/3.10 aiohttp/3.13.3"
2026-01-22 23:13:44,385 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:13:43 -0600] "POST /gossip HTTP/1.1" 200 35921 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:13:44,387 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:13:40 -0600] "GET /status HTTP/1.1" 200 0 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:13:44,387 - scripts.p2p.managers.training_coordinator - INFO - Started nnue training job nnue_hexagonal_2p_1769145168 on mac-studio
2026-01-22 23:13:44,509 - app.coordination.task_coordinator - INFO - [HeartbeatMonitor] Started (timeout=300.0s)
2026-01-22 23:13:44,509 - app.coordination.task_coordinator - INFO - Task coordinator initialized (with heartbeat monitor)
2026-01-22 23:13:44,509 - app.coordination.task_coordinator_reservations - INFO - [Training] Reserved node mac-studio for training (config=hexagonal_2p, expires in 120min)
2026-01-22 23:13:44,509 - scripts.p2p.managers.training_coordinator - INFO - Reserved mac-studio for training job nnue_hexagonal_2p_1769145168
2026-01-22 23:13:44,510 - scripts.p2p.p2p_mixin_base - INFO - [selfplay_scheduler] Training started for hexagonal_2p, reducing selfplay rate 1.00 -> 0.60
2026-01-22 23:13:44,510 - p2p_orchestrator - INFO - [P2P] Training started: hexagonal_2p on unknown
2026-01-22 23:13:44,515 - p2p_orchestrator - INFO - [P2P] Training started: hexagonal_2p on unknown
2026-01-22 23:13:44,515 - p2p_orchestrator - INFO - LEADERLESS FALLBACK: Triggered 1 local training job(s)
2026-01-22 23:13:45,651 - p2p_orchestrator - INFO - Training job nnue_hexagonal_2p_1769145168 failed
2026-01-22 23:13:46,840 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:13:46 -0600] "POST /heartbeat HTTP/1.1" 200 2283 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:13:47,731 - p2p_orchestrator - INFO - [Bootstrap] Successfully bootstrapped from peers (attempt 1/3)
2026-01-22 23:13:48,985 - scripts.p2p.loops.job_loops - INFO - [JobReassignment] Initial delay complete, starting checks
2026-01-22 23:13:50,770 - scripts.p2p.loops.job_loops - INFO - Work queue maintenance loop started
2026-01-22 23:13:51,474 - aiohttp.access - INFO - 100.94.174.19 [22/Jan/2026:23:13:51 -0600] "GET /health HTTP/1.1" 200 696 "-" "Python/3.10 aiohttp/3.13.2"
2026-01-22 23:13:52,209 - scripts.p2p.loops.job_loops - INFO - [WorkerPull] Claimed work autonomous-13d0285c: selfplay (source: autonomous)
2026-01-22 23:13:52,209 - p2p_orchestrator - INFO - Skipping selfplay work autonomous-13d0285c: selfplay_enabled=false for this node
2026-01-22 23:13:53,083 - aiohttp.access - INFO - 100.106.19.6 [22/Jan/2026:23:13:53 -0600] "GET /health HTTP/1.1" 200 696 "-" "Python/3.12 aiohttp/3.13.2"
2026-01-22 23:13:53,772 - p2p_orchestrator - INFO - [VoterCount] Self recognized as voter: mac-studio
2026-01-22 23:13:53,862 - p2p_orchestrator - WARNING - [VoterHealth] Status: 3/8 voters alive, quorum=OK, offline: ['hetzner-cpu3', 'macbook-pro-3', 'macbook-pro-4', 'macbook-pro-5', 'vultr-a100-20gb']
